<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Node.js URL & Query String Modules Demo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .content {
            padding: 30px;
        }

        .section {
            margin-bottom: 40px;
            border: 2px solid #e8f4f8;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .section-header {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: white;
            padding: 20px;
            font-size: 1.4rem;
            font-weight: bold;
        }

        .section-content {
            padding: 25px;
            background: white;
        }

        .analogy {
            background: linear-gradient(135deg, #ffecd2, #fcb69f);
            border-left: 5px solid #ff6b6b;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .analogy h3 {
            color: #d63031;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .interactive-demo {
            background: #f8f9fa;
            border: 2px dashed #6c757d;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .input-group {
            margin-bottom: 15px;
        }

        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #2c3e50;
        }

        .input-group input {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s;
        }

        .input-group input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 10px rgba(52, 152, 219, 0.3);
        }

        .btn {
            background: linear-gradient(135deg, #00b894, #00cec9);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: transform 0.2s, box-shadow 0.2s;
            margin: 5px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,184,148,0.4);
        }

        .output {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 10px;
            margin-top: 15px;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            overflow-x: auto;
            box-shadow: inset 0 2px 10px rgba(0,0,0,0.3);
        }

        pre {
            background: #282c34;
            color: #abb2bf;
            padding: 20px;
            border-radius: 10px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.6;
            border: 1px solid #3c4043;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .keyword { color: #c678dd; }
        .string { color: #98c379; }
        .comment { color: #5c6370; font-style: italic; }
        .function { color: #61afef; }
        .property { color: #d19a66; }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border: 1px solid #e9ecef;
        }

        .emoji {
            font-size: 1.5em;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üåê Node.js URL & Query String Modules</h1>
            <p>Interactive demonstration of URL parsing and query string manipulation</p>
        </div>

        <div class="content">
            <!-- URL Module Section -->
            <div class="section">
                <div class="section-header">
                    üìç URL Module - Understanding Web Addresses
                </div>
                <div class="section-content">
                    <div class="analogy">
                        <h3><span class="emoji">üè†</span> Analogy: URLs are like Postal Addresses</h3>
                        <p>Just like a postal address has different parts (country, state, city, street, house number), 
                        a URL has different components that help locate resources on the web. The URL module helps us 
                        break down and work with these address components programmatically.</p>
                    </div>

                    <p><strong>The URL module</strong> provides utilities for URL resolution and parsing. It can parse a URL string into its components and construct URLs from their parts.</p>

                    <h4>üîß Key Methods:</h4>
                    <ul style="margin: 15px 0; padding-left: 20px;">
                        <li><code>new URL(urlString)</code> - Creates a URL object</li>
                        <li><code>url.parse(urlString)</code> - Parses URL into components (legacy)</li>
                        <li><code>url.format(urlObject)</code> - Formats URL object back to string</li>
                        <li><code>url.resolve(from, to)</code> - Resolves relative URLs</li>
                    </ul>

                    <div class="interactive-demo">
                        <h4>üß™ Try URL Parsing:</h4>
                        <div class="input-group">
                            <label for="urlInput">Enter a URL to parse:</label>
                            <input type="text" id="urlInput" value="https://example.com:8080/path/to/resource?name=john&age=30&city=new%20york#section1" placeholder="https://example.com/path?param=value#hash">
                        </div>
                        <button class="btn" onclick="parseURL()">üîç Parse URL</button>
                        <button class="btn" onclick="demonstrateURL()">üìù Show Examples</button>
                        <div class="output" id="urlOutput"></div>
                    </div>

                    <h4>üìã URL Code Examples:</h4>
<pre><span class="comment">// Node.js URL Module Examples</span>
<span class="keyword">const</span> <span class="property">url</span> = <span class="function">require</span>(<span class="string">'url'</span>);

<span class="comment">// Method 1: Using new URL() constructor (recommended)</span>
<span class="keyword">const</span> <span class="property">myURL</span> = <span class="keyword">new</span> <span class="function">URL</span>(<span class="string">'https://example.com:8080/path?name=john&age=30#top'</span>);

<span class="function">console.log</span>(<span class="property">myURL</span>.<span class="property">protocol</span>);  <span class="comment">// 'https:'</span>
<span class="function">console.log</span>(<span class="property">myURL</span>.<span class="property">hostname</span>);  <span class="comment">// 'example.com'</span>
<span class="function">console.log</span>(<span class="property">myURL</span>.<span class="property">port</span>);      <span class="comment">// '8080'</span>
<span class="function">console.log</span>(<span class="property">myURL</span>.<span class="property">pathname</span>);  <span class="comment">// '/path'</span>
<span class="function">console.log</span>(<span class="property">myURL</span>.<span class="property">search</span>);    <span class="comment">// '?name=john&age=30'</span>
<span class="function">console.log</span>(<span class="property">myURL</span>.<span class="property">hash</span>);      <span class="comment">// '#top'</span>

<span class="comment">// Method 2: Using url.parse() (legacy but still useful)</span>
<span class="keyword">const</span> <span class="property">parsedURL</span> = <span class="property">url</span>.<span class="function">parse</span>(<span class="string">'https://example.com/path?name=john'</span>, <span class="keyword">true</span>);
<span class="function">console.log</span>(<span class="property">parsedURL</span>.<span class="property">query</span>); <span class="comment">// { name: 'john' } - parsed as object</span>

<span class="comment">// URL resolution</span>
<span class="keyword">const</span> <span class="property">resolved</span> = <span class="property">url</span>.<span class="function">resolve</span>(<span class="string">'http://example.com/path/'</span>, <span class="string">'../other'</span>);
<span class="function">console.log</span>(<span class="property">resolved</span>); <span class="comment">// 'http://example.com/other'</span></pre>
                </div>
            </div>

            <!-- Query String Module Section -->
            <div class="section">
                <div class="section-header">
                    üîç Query String Module - Handling URL Parameters
                </div>
                <div class="section-content">
                    <div class="analogy">
                        <h3><span class="emoji">üìã</span> Analogy: Query Strings are like Form Data</h3>
                        <p>Think of query strings as a way to fill out a form and attach it to a URL. Just like a form 
                        has field names and values (Name: John, Age: 30), query strings have key-value pairs 
                        (name=john&age=30). The querystring module helps us convert between form-like objects and URL parameter strings.</p>
                    </div>

                    <p><strong>The querystring module</strong> provides utilities for parsing and formatting URL query strings. It's perfect for handling form data and URL parameters.</p>

                    <h4>üîß Key Methods:</h4>
                    <ul style="margin: 15px 0; padding-left: 20px;">
                        <li><code>querystring.parse(str)</code> - Parses query string to object</li>
                        <li><code>querystring.stringify(obj)</code> - Converts object to query string</li>
                        <li><code>querystring.escape(str)</code> - URL encodes a string</li>
                        <li><code>querystring.unescape(str)</code> - URL decodes a string</li>
                    </ul>

                    <div class="interactive-demo">
                        <h4>üß™ Try Query String Operations:</h4>
                        <div class="grid">
                            <div class="card">
                                <h5>Parse Query String</h5>
                                <div class="input-group">
                                    <label>Query String:</label>
                                    <input type="text" id="queryInput" value="name=john&age=30&city=new york&hobbies=reading&hobbies=gaming" placeholder="name=john&age=30">
                                </div>
                                <button class="btn" onclick="parseQuery()">üì• Parse</button>
                            </div>
                            <div class="card">
                                <h5>Stringify Object</h5>
                                <div class="input-group">
                                    <label>JSON Object:</label>
                                    <input type="text" id="objectInput" value='{"name":"jane","age":25,"skills":["js","node","react"]}' placeholder='{"key":"value"}'>
                                </div>
                                <button class="btn" onclick="stringifyObject()">üì§ Stringify</button>
                            </div>
                        </div>
                        <button class="btn" onclick="demonstrateQueryString()">üìù Show Examples</button>
                        <div class="output" id="queryOutput"></div>
                    </div>

                    <h4>üìã Query String Code Examples:</h4>
<pre><span class="comment">// Node.js QueryString Module Examples</span>
<span class="keyword">const</span> <span class="property">querystring</span> = <span class="function">require</span>(<span class="string">'querystring'</span>);

<span class="comment">// Parsing query strings</span>
<span class="keyword">const</span> <span class="property">queryStr</span> = <span class="string">'name=john&age=30&city=new%20york&hobbies=reading&hobbies=gaming'</span>;
<span class="keyword">const</span> <span class="property">parsed</span> = <span class="property">querystring</span>.<span class="function">parse</span>(<span class="property">queryStr</span>);

<span class="function">console.log</span>(<span class="property">parsed</span>);
<span class="comment">// Output: {
//   name: 'john',
//   age: '30',
//   city: 'new york',
//   hobbies: ['reading', 'gaming']
// }</span>

<span class="comment">// Converting objects to query strings</span>
<span class="keyword">const</span> <span class="property">data</span> = {
  <span class="property">name</span>: <span class="string">'jane'</span>,
  <span class="property">age</span>: <span class="string">'25'</span>,
  <span class="property">skills</span>: [<span class="string">'javascript'</span>, <span class="string">'nodejs'</span>],
  <span class="property">location</span>: <span class="string">'san francisco'</span>
};

<span class="keyword">const</span> <span class="property">queryStr2</span> = <span class="property">querystring</span>.<span class="function">stringify</span>(<span class="property">data</span>);
<span class="function">console.log</span>(<span class="property">queryStr2</span>);
<span class="comment">// Output: 'name=jane&age=25&skills=javascript&skills=nodejs&location=san%20francisco'</span>

<span class="comment">// URL encoding/decoding</span>
<span class="keyword">const</span> <span class="property">encoded</span> = <span class="property">querystring</span>.<span class="function">escape</span>(<span class="string">'hello world & symbols!'</span>);
<span class="function">console.log</span>(<span class="property">encoded</span>); <span class="comment">// 'hello%20world%20%26%20symbols!'</span>

<span class="keyword">const</span> <span class="property">decoded</span> = <span class="property">querystring</span>.<span class="function">unescape</span>(<span class="property">encoded</span>);
<span class="function">console.log</span>(<span class="property">decoded</span>); <span class="comment">// 'hello world & symbols!'</span></pre>
                </div>
            </div>

            <!-- Practical Examples Section -->
            <div class="section">
                <div class="section-header">
                    üöÄ Practical Examples & Use Cases
                </div>
                <div class="section-content">
                    <div class="grid">
                        <div class="card">
                            <h4>üåê Web Server Route Handling</h4>
                            <p>Parse incoming request URLs to extract parameters and route to appropriate handlers.</p>
                        </div>
                        <div class="card">
                            <h4>üìä API Query Processing</h4>
                            <p>Extract filters, pagination, and search parameters from API requests.</p>
                        </div>
                        <div class="card">
                            <h4>üîó URL Building</h4>
                            <p>Construct URLs dynamically with proper encoding for links and redirects.</p>
                        </div>
                        <div class="card">
                            <h4>üìù Form Data Processing</h4>
                            <p>Handle form submissions and convert between different data formats.</p>
                        </div>
                    </div>

                    <div class="interactive-demo">
                        <h4>üéØ Complete Example: URL Analysis Tool</h4>
                        <div class="input-group">
                            <label for="fullUrlInput">Enter a complete URL for full analysis:</label>
                            <input type="text" id="fullUrlInput" value="https://api.example.com:3000/users/search?name=john&age=25&active=true&tags=developer&tags=nodejs#results" placeholder="https://example.com/path?param=value#hash">
                        </div>
                        <button class="btn" onclick="analyzeCompleteURL()">üî¨ Full Analysis</button>
                        <div class="output" id="analysisOutput"></div>
                    </div>

                    <h4>üìã Real-world Example:</h4>
<pre><span class="comment">// Complete URL processing example</span>
<span class="keyword">const</span> <span class="property">url</span> = <span class="function">require</span>(<span class="string">'url'</span>);
<span class="keyword">const</span> <span class="property">querystring</span> = <span class="function">require</span>(<span class="string">'querystring'</span>);

<span class="keyword">function</span> <span class="function">processRequest</span>(<span class="property">requestUrl</span>) {
  <span class="comment">// Parse the URL</span>
  <span class="keyword">const</span> <span class="property">parsedUrl</span> = <span class="keyword">new</span> <span class="function">URL</span>(<span class="property">requestUrl</span>);
  
  <span class="comment">// Extract query parameters</span>
  <span class="keyword">const</span> <span class="property">queryParams</span> = <span class="property">querystring</span>.<span class="function">parse</span>(<span class="property">parsedUrl</span>.<span class="property">search</span>.<span class="function">slice</span>(<span class="string">1</span>));
  
  <span class="keyword">return</span> {
    <span class="property">endpoint</span>: <span class="property">parsedUrl</span>.<span class="property">pathname</span>,
    <span class="property">method</span>: <span class="function">getMethodFromPath</span>(<span class="property">parsedUrl</span>.<span class="property">pathname</span>),
    <span class="property">filters</span>: <span class="property">queryParams</span>,
    <span class="property">baseUrl</span>: <span class="property">parsedUrl</span>.<span class="property">origin</span>
  };
}

<span class="comment">// Usage in Express.js-like scenario</span>
<span class="keyword">const</span> <span class="property">request</span> = <span class="function">processRequest</span>(<span class="string">'https://api.example.com/users?active=true&role=admin'</span>);
<span class="function">console.log</span>(<span class="property">request</span>);</pre>
                </div>
            </div>
        </div>
    </div>

    <script>
        function parseURL() {
            const urlInput = document.getElementById('urlInput').value;
            const output = document.getElementById('urlOutput');
            
            try {
                // Using new URL constructor
                const parsedURL = new URL(urlInput);
                
                const result = `URL Analysis:
==================

Original URL: ${urlInput}

üåç Protocol: ${parsedURL.protocol}
üè† Hostname: ${parsedURL.hostname}
üö™ Port: ${parsedURL.port || 'default'}
üìÇ Pathname: ${parsedURL.pathname}
üîç Search: ${parsedURL.search}
#Ô∏è‚É£ Hash: ${parsedURL.hash}
üåê Origin: ${parsedURL.origin}

SearchParams object:
${Array.from(parsedURL.searchParams.entries()).map(([key, value]) => `  ${key}: ${value}`).join('\n') || '  (no parameters)'}`;
                
                output.textContent = result;
            } catch (error) {
                output.textContent = `‚ùå Error parsing URL: ${error.message}`;
            }
        }

        function demonstrateURL() {
            const output = document.getElementById('urlOutput');
            const examples = `URL Module Examples:
====================

Example 1: Basic URL parsing
const url = new URL('https://example.com:8080/api/users?active=true&role=admin#top');
console.log(url.protocol);  // 'https:'
console.log(url.hostname);  // 'example.com'
console.log(url.port);      // '8080'
console.log(url.pathname);  // '/api/users'

Example 2: Working with search parameters
url.searchParams.set('page', '2');
url.searchParams.append('sort', 'name');
url.searchParams.delete('active');
console.log(url.search);    // '?role=admin&page=2&sort=name'

Example 3: URL resolution
const base = 'https://example.com/api/';
const relative = '../docs/readme.html';
const resolved = new URL(relative, base);
console.log(resolved.href); // 'https://example.com/docs/readme.html'`;
            
            output.textContent = examples;
        }

        function parseQuery() {
            const queryInput = document.getElementById('queryInput').value;
            const output = document.getElementById('queryOutput');
            
            try {
                // Simulate querystring.parse
                const parsed = parseQueryString(queryInput);
                
                const result = `Query String Parsing:
========================

Original: ${queryInput}

Parsed Object:
${JSON.stringify(parsed, null, 2)}

Individual Parameters:
${Object.entries(parsed).map(([key, value]) => {
    if (Array.isArray(value)) {
        return `  ${key}: [${value.join(', ')}] (array)`;
    }
    return `  ${key}: ${value}`;
}).join('\n')}`;
                
                output.textContent = result;
            } catch (error) {
                output.textContent = `‚ùå Error: ${error.message}`;
            }
        }

        function stringifyObject() {
            const objectInput = document.getElementById('objectInput').value;
            const output = document.getElementById('queryOutput');
            
            try {
                const obj = JSON.parse(objectInput);
                const queryString = stringifyObject2(obj);
                
                const result = `Object to Query String:
========================

Original Object:
${JSON.stringify(obj, null, 2)}

Query String:
${queryString}

URL Encoded:
${encodeURIComponent(queryString)}`;
                
                output.textContent = result;
            } catch (error) {
                output.textContent = `‚ùå Error: ${error.message}`;
            }
        }

        function demonstrateQueryString() {
            const output = document.getElementById('queryOutput');
            const examples = `QueryString Module Examples:
==============================

Example 1: Basic parsing
const qs = require('querystring');
const parsed = qs.parse('name=john&age=30&city=new%20york');
// Result: { name: 'john', age: '30', city: 'new york' }

Example 2: Arrays in query strings
const parsed2 = qs.parse('tags=javascript&tags=nodejs&tags=react');
// Result: { tags: ['javascript', 'nodejs', 'react'] }

Example 3: Custom separators
const parsed3 = qs.parse('name:john;age:30', ';', ':');
// Result: { name: 'john', age: '30' }

Example 4: Stringify with arrays
const obj = { name: 'jane', skills: ['js', 'node'], active: true };
const str = qs.stringify(obj);
// Result: 'name=jane&skills=js&skills=node&active=true'`;
            
            output.textContent = examples;
        }

        function analyzeCompleteURL() {
            const fullUrlInput = document.getElementById('fullUrlInput').value;
            const output = document.getElementById('analysisOutput');
            
            try {
                const parsedURL = new URL(fullUrlInput);
                const queryParams = parseQueryString(parsedURL.search.slice(1));
                
                const result = `Complete URL Analysis:
========================

üåç Full URL: ${fullUrlInput}

üìã URL Components:
  Protocol: ${parsedURL.protocol}
  Host: ${parsedURL.host}
  Hostname: ${parsedURL.hostname}
  Port: ${parsedURL.port || 'default'}
  Origin: ${parsedURL.origin}
  Pathname: ${parsedURL.pathname}
  Search: ${parsedURL.search}
  Hash: ${parsedURL.hash}

üîç Query Parameters Analysis:
${Object.keys(queryParams).length === 0 ? '  (no query parameters)' : 
  Object.entries(queryParams).map(([key, value]) => {
    if (Array.isArray(value)) {
        return `  ${key}: [${value.join(', ')}] (${value.length} items)`;
    }
    return `  ${key}: "${value}"`;
}).join('\n')}

üõ†Ô∏è Practical Usage:
  Base API URL: ${parsedURL.origin}
  Endpoint: ${parsedURL.pathname}
  Filters: ${JSON.stringify(queryParams)}
  Fragment: ${parsedURL.hash ? parsedURL.hash.slice(1) : 'none'}

üìä Statistics:
  Total query params: ${Object.keys(queryParams).length}
  URL length: ${fullUrlInput.length} characters
  Path depth: ${parsedURL.pathname.split('/').length - 1} levels`;
                
                output.textContent = result;
            } catch (error) {
                output.textContent = `‚ùå Error analyzing URL: ${error.message}`;
            }
        }

        // Helper functions to simulate Node.js querystring module
        function parseQueryString(str) {
            if (!str) return {};
            
            const result = {};
            const pairs = str.split('&');
            
            pairs.forEach(pair => {
                const [key, value] = pair.split('=').map(decodeURIComponent);
                if (key) {
                    if (result[key]) {
                        if (!Array.isArray(result[key])) {
                            result[key] = [result[key]];
                        }
                        result[key].push(value || '');
                    } else {
                        result[key] = value || '';
                    }
                }
            });
            
            return result;
        }

        function stringifyObject2(obj) {
            const pairs = [];
            
            for (const [key, value] of Object.entries(obj)) {
                if (Array.isArray(value)) {
                    value.forEach(item => {
                        pairs.push(`${encodeURIComponent(key)}=${encodeURIComponent(item)}`);
                    });
                } else {
                    pairs.push(`${encodeURIComponent(key)}=${encodeURIComponent(value)}`);
                }
            }
            
            return pairs.join('&');
        }

        // Initialize with first example
        window.onload = function() {
            parseURL();
        };
    </script>
</body>
</html>