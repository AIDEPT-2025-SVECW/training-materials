<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Express.js Template Engines - Interactive Guide</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        padding: 20px;
        line-height: 1.6;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        background: white;
        border-radius: 15px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        overflow: hidden;
      }

      header {
        background: linear-gradient(135deg, #2c3e50, #34495e);
        color: white;
        padding: 40px;
        text-align: center;
      }

      header h1 {
        font-size: 2.5em;
        margin-bottom: 10px;
      }

      header p {
        font-size: 1.2em;
        opacity: 0.9;
      }

      .content {
        padding: 40px;
      }

      .section {
        margin-bottom: 50px;
        animation: fadeIn 0.6s ease-in;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      h2 {
        color: #2c3e50;
        font-size: 2em;
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 3px solid #667eea;
      }

      h3 {
        color: #34495e;
        font-size: 1.5em;
        margin: 25px 0 15px 0;
      }

      p {
        color: #555;
        margin-bottom: 15px;
        font-size: 1.1em;
      }

      .analogy-box {
        background: linear-gradient(135deg, #fff5e6, #ffe6cc);
        border-left: 5px solid #ff9800;
        padding: 20px;
        margin: 20px 0;
        border-radius: 8px;
      }

      .analogy-box h4 {
        color: #e65100;
        margin-bottom: 10px;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .analogy-box h4:before {
        content: "üí°";
        font-size: 1.5em;
      }

      .key-point {
        background: #e3f2fd;
        border-left: 5px solid #2196f3;
        padding: 20px;
        margin: 20px 0;
        border-radius: 8px;
      }

      .key-point h4 {
        color: #1976d2;
        margin-bottom: 10px;
      }

      pre {
        background: #1e1e1e;
        color: #d4d4d4;
        padding: 20px;
        border-radius: 8px;
        overflow-x: auto;
        margin: 20px 0;
        font-family: "Courier New", Courier, monospace;
        font-size: 0.95em;
        line-height: 1.5;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      }

      .tabs {
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
        flex-wrap: wrap;
      }

      .tab-button {
        background: #667eea;
        color: white;
        border: none;
        padding: 12px 24px;
        border-radius: 8px;
        cursor: pointer;
        font-size: 1em;
        transition: all 0.3s ease;
      }

      .tab-button:hover {
        background: #764ba2;
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      }

      .tab-button.active {
        background: #2c3e50;
      }

      .tab-content {
        display: none;
      }

      .tab-content.active {
        display: block;
        animation: fadeIn 0.4s ease-in;
      }

      .comparison-table {
        width: 100%;
        border-collapse: collapse;
        margin: 20px 0;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }

      .comparison-table th {
        background: #667eea;
        color: white;
        padding: 15px;
        text-align: left;
      }

      .comparison-table td {
        padding: 15px;
        border-bottom: 1px solid #ddd;
      }

      .comparison-table tr:hover {
        background: #f5f5f5;
      }

      .demo-box {
        background: #f9f9f9;
        border: 2px solid #667eea;
        border-radius: 8px;
        padding: 20px;
        margin: 20px 0;
      }

      .benefit-list {
        list-style: none;
        padding: 0;
      }

      .benefit-list li {
        padding: 10px 0 10px 30px;
        position: relative;
        color: #555;
      }

      .benefit-list li:before {
        content: "‚úì";
        position: absolute;
        left: 0;
        color: #4caf50;
        font-weight: bold;
        font-size: 1.5em;
      }

      .interactive-demo {
        background: white;
        border: 2px solid #667eea;
        border-radius: 8px;
        padding: 20px;
        margin: 20px 0;
      }

      .demo-input {
        width: 100%;
        padding: 10px;
        margin: 10px 0;
        border: 2px solid #ddd;
        border-radius: 5px;
        font-size: 1em;
      }

      .demo-button {
        background: #4caf50;
        color: white;
        border: none;
        padding: 12px 30px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 1em;
        transition: all 0.3s ease;
      }

      .demo-button:hover {
        background: #45a049;
        transform: scale(1.05);
      }

      .demo-output {
        background: #1e1e1e;
        color: #d4d4d4;
        padding: 20px;
        border-radius: 8px;
        margin-top: 20px;
        min-height: 100px;
        font-family: "Courier New", Courier, monospace;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <h1>üöÄ Express.js Template Engines</h1>
        <p>A Comprehensive Interactive Guide</p>
      </header>

      <div class="content">
        <!-- Section 1: What are Template Engines -->
        <div class="section">
          <h2>üìö What are Template Engines?</h2>
          <p>
            Template engines are tools that allow you to embed dynamic data into
            HTML templates. They help you generate HTML pages dynamically by
            combining static templates with dynamic data from your server.
          </p>

          <div class="analogy-box">
            <h4>Analogy: The Mad Libs Game</h4>
            <p>
              Think of template engines like a <strong>Mad Libs game</strong>.
              You have a story (HTML template) with blanks: "Hello, my name is
              _____ and I love _____." The template engine fills in those blanks
              with actual data: "Hello, my name is <strong>JP</strong> and I
              love <strong>coding</strong>."
            </p>
            <p>
              Just like Mad Libs creates unique stories by filling in blanks,
              template engines create unique HTML pages by inserting data into
              placeholders.
            </p>
          </div>

          <h3>How They Work:</h3>
          <p>Template engines take two things:</p>
          <ul class="benefit-list">
            <li>
              <strong>A Template:</strong> HTML with special placeholders for
              dynamic content
            </li>
            <li>
              <strong>Data:</strong> JavaScript objects containing the actual
              values
            </li>
          </ul>
          <p>
            They combine these to produce final HTML that gets sent to the
            browser.
          </p>
        </div>

        <!-- Section 2: Why We Need Them -->
        <div class="section">
          <h2>ü§î Why Do We Need Template Engines?</h2>

          <div class="key-point">
            <h4>The Problem Without Template Engines:</h4>
            <p>
              Imagine building HTML strings manually in your code - it's messy,
              error-prone, and hard to maintain!
            </p>
          </div>

          <h3>‚ùå Without Template Engine (The Hard Way):</h3>
          <pre>
app.get('/user/:name', (req, res) => {
    const name = req.params.name;
    const html = '&lt;!DOCTYPE html&gt;' +
                 '&lt;html&gt;' +
                 '&lt;head&gt;&lt;title&gt;User Profile&lt;/title&gt;&lt;/head&gt;' +
                 '&lt;body&gt;' +
                 '&lt;h1&gt;Welcome, ' + name + '!&lt;/h1&gt;' +
                 '&lt;p&gt;This is your profile page.&lt;/p&gt;' +
                 '&lt;/body&gt;' +
                 '&lt;/html&gt;';
    res.send(html);
});

// This is painful! Hard to read, maintain, and debug!
</pre
          >

          <h3>‚úÖ With Template Engine (The Easy Way):</h3>
          <pre>
// In your Express route
app.get('/user/:name', (req, res) => {
    res.render('user', { name: req.params.name });
});

// In your template file (user.ejs)
// &lt;!DOCTYPE html&gt;
// &lt;html&gt;
// &lt;head&gt;&lt;title&gt;User Profile&lt;/title&gt;&lt;/head&gt;
// &lt;body&gt;
//     &lt;h1&gt;Welcome, &lt;%= name %&gt;!&lt;/h1&gt;
//     &lt;p&gt;This is your profile page.&lt;/p&gt;
// &lt;/body&gt;
// &lt;/html&gt;

// Clean, readable, and maintainable!
</pre
          >

          <h3>Key Benefits:</h3>
          <ul class="benefit-list">
            <li>
              <strong>Separation of Concerns:</strong> Keep HTML separate from
              JavaScript logic
            </li>
            <li>
              <strong>Code Reusability:</strong> Create reusable template
              components
            </li>
            <li>
              <strong>Maintainability:</strong> Easier to update and debug
            </li>
            <li>
              <strong>Readability:</strong> Clean, organized code structure
            </li>
            <li>
              <strong>DRY Principle:</strong> Don't Repeat Yourself - reuse
              templates
            </li>
            <li>
              <strong>Team Collaboration:</strong> Designers can work on
              templates while developers handle logic
            </li>
          </ul>
        </div>

        <!-- Section 3: Popular Template Engines -->
        <div class="section">
          <h2>üé® Popular Template Engines for Express</h2>

          <table class="comparison-table">
            <thead>
              <tr>
                <th>Engine</th>
                <th>Syntax</th>
                <th>Best For</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>EJS</strong></td>
                <td>HTML with embedded JavaScript</td>
                <td>Beginners, simple syntax</td>
              </tr>
              <tr>
                <td><strong>Pug (Jade)</strong></td>
                <td>Indentation-based, minimal</td>
                <td>Clean, concise templates</td>
              </tr>
              <tr>
                <td><strong>Handlebars</strong></td>
                <td>Logic-less templates</td>
                <td>Simple data display</td>
              </tr>
              <tr>
                <td><strong>Mustache</strong></td>
                <td>Logic-less, minimal</td>
                <td>Multi-language projects</td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- Section 4: How to Use Template Engines -->
        <div class="section">
          <h2>üõ†Ô∏è How to Use Template Engines in Express</h2>

          <div class="tabs">
            <button class="tab-button active" onclick="showTab('ejs')">
              EJS Example
            </button>
            <button class="tab-button" onclick="showTab('pug')">
              Pug Example
            </button>
            <button class="tab-button" onclick="showTab('handlebars')">
              Handlebars Example
            </button>
          </div>

          <!-- EJS Tab -->
          <div id="ejs" class="tab-content active">
            <h3>Using EJS (Embedded JavaScript)</h3>

            <h4>Step 1: Installation</h4>
            <pre>
npm install express ejs
</pre
            >

            <h4>Step 2: Express Setup</h4>
            <pre>
const express = require('express');
const app = express();

// Set EJS as the view engine
app.set('view engine', 'ejs');

// Set the directory for template files
app.set('views', './views');

// Define a route
app.get('/', (req, res) => {
    const data = {
        title: 'Home Page',
        user: {
            name: 'JP',
            age: 28,
            hobbies: ['Coding', 'Reading', 'Gaming']
        },
        isLoggedIn: true
    };
    
    // Render the template with data
    res.render('index', data);
});

app.listen(3000, () => {
    console.log('Server running on port 3000');
});
</pre
            >

            <h4>Step 3: Create Template (views/index.ejs)</h4>
            <pre>
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;&lt;%= title %&gt;&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;&lt;%= title %&gt;&lt;/h1&gt;
    
    &lt;% if (isLoggedIn) { %&gt;
        &lt;h2&gt;Welcome back, &lt;%= user.name %&gt;!&lt;/h2&gt;
        &lt;p&gt;Age: &lt;%= user.age %&gt;&lt;/p&gt;
        
        &lt;h3&gt;Your Hobbies:&lt;/h3&gt;
        &lt;ul&gt;
            &lt;% user.hobbies.forEach(hobby =&gt; { %&gt;
                &lt;li&gt;&lt;%= hobby %&gt;&lt;/li&gt;
            &lt;% }); %&gt;
        &lt;/ul&gt;
    &lt;% } else { %&gt;
        &lt;p&gt;Please log in&lt;/p&gt;
    &lt;% } %&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre
            >

            <div class="key-point">
              <h4>EJS Syntax Guide:</h4>
              <ul class="benefit-list">
                <li>
                  <code>&lt;%= variable %&gt;</code> - Output escaped HTML
                </li>
                <li>
                  <code>&lt;%- variable %&gt;</code> - Output unescaped HTML
                </li>
                <li>
                  <code>&lt;% code %&gt;</code> - Execute JavaScript without
                  output
                </li>
                <li>
                  <code>&lt;%# comment %&gt;</code> - Comments (not rendered)
                </li>
              </ul>
            </div>
          </div>

          <!-- Pug Tab -->
          <div id="pug" class="tab-content">
            <h3>Using Pug (formerly Jade)</h3>

            <h4>Step 1: Installation</h4>
            <pre>
npm install express pug
</pre
            >

            <h4>Step 2: Express Setup</h4>
            <pre>
const express = require('express');
const app = express();

// Set Pug as the view engine
app.set('view engine', 'pug');
app.set('views', './views');

app.get('/', (req, res) => {
    res.render('index', {
        title: 'Home Page',
        user: {
            name: 'John Doe',
            age: 28,
            hobbies: ['Coding', 'Reading', 'Gaming']
        }
    });
});

app.listen(3000);
</pre
            >

            <h4>Step 3: Create Template (views/index.pug)</h4>
            <pre>
doctype html
html
  head
    title= title
  body
    h1= title
    h2 Welcome back, #{user.name}!
    p Age: #{user.age}
    
    h3 Your Hobbies:
    ul
      each hobby in user.hobbies
        li= hobby
</pre
            >

            <div class="analogy-box">
              <h4>Pug Philosophy</h4>
              <p>
                Pug is like <strong>Python for HTML</strong>. It uses
                indentation instead of closing tags, making templates cleaner
                and less verbose. No more forgetting to close divs!
              </p>
            </div>
          </div>

          <!-- Handlebars Tab -->
          <div id="handlebars" class="tab-content">
            <h3>Using Handlebars</h3>

            <h4>Step 1: Installation</h4>
            <pre>
npm install express express-handlebars
</pre
            >

            <h4>Step 2: Express Setup</h4>
            <pre>
const express = require('express');
const { engine } = require('express-handlebars');
const app = express();

// Set Handlebars as the view engine
app.engine('handlebars', engine());
app.set('view engine', 'handlebars');
app.set('views', './views');

app.get('/', (req, res) => {
    res.render('home', {
        title: 'Home Page',
        user: {
            name: 'John Doe',
            age: 28,
            hobbies: ['Coding', 'Reading', 'Gaming']
        }
    });
});

app.listen(3000);
</pre
            >

            <h4>Step 3: Create Template (views/home.handlebars)</h4>
            <pre>
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;{{title}}&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;{{title}}&lt;/h1&gt;
    &lt;h2&gt;Welcome, {{user.name}}!&lt;/h2&gt;
    &lt;p&gt;Age: {{user.age}}&lt;/p&gt;
    
    &lt;h3&gt;Your Hobbies:&lt;/h3&gt;
    &lt;ul&gt;
        {{#each user.hobbies}}
            &lt;li&gt;{{this}}&lt;/li&gt;
        {{/each}}
    &lt;/ul&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre
            >

            <div class="key-point">
              <h4>Why Handlebars?</h4>
              <p>
                Handlebars is "logic-less" - it enforces separation between
                logic (in your routes) and presentation (in your templates).
                This makes templates cleaner and easier for designers to work
                with.
              </p>
            </div>
          </div>
        </div>

        <!-- Section 5: Interactive Demo -->
        <div class="section">
          <h2>üéÆ Interactive Demo</h2>
          <p>
            See how template engines work! Enter your data and watch it render
            in real-time:
          </p>

          <div class="interactive-demo">
            <h3>Template Data:</h3>
            <input
              type="text"
              id="userName"
              class="demo-input"
              placeholder="Enter your name"
              value="JP"
            />
            <input
              type="text"
              id="userAge"
              class="demo-input"
              placeholder="Enter your age"
              value="25"
            />
            <input
              type="text"
              id="userCity"
              class="demo-input"
              placeholder="Enter your city"
              value="New York"
            />
            <button class="demo-button" onclick="renderTemplate()">
              Render Template
            </button>

            <h3>Template Output:</h3>
            <pre class="demo-output" id="output">
              <!-- Output will appear here -->
            </pre>
          </div>
        </div>

        <!-- Section 6: Best Practices -->
        <div class="section">
          <h2>‚ú® Best Practices</h2>

          <div class="key-point">
            <h4>1. Organize Your Views</h4>
            <p>Keep templates organized in folders:</p>
            <pre>
views/
  ‚îú‚îÄ‚îÄ layouts/
  ‚îÇ   ‚îî‚îÄ‚îÄ main.ejs
  ‚îú‚îÄ‚îÄ partials/
  ‚îÇ   ‚îú‚îÄ‚îÄ header.ejs
  ‚îÇ   ‚îî‚îÄ‚îÄ footer.ejs
  ‚îî‚îÄ‚îÄ pages/
      ‚îú‚îÄ‚îÄ home.ejs
      ‚îî‚îÄ‚îÄ about.ejs
</pre
            >
          </div>

          <div class="key-point">
            <h4>2. Use Partials for Reusability</h4>
            <p>
              Create reusable components like headers, footers, and navigation
              bars.
            </p>
            <pre>
&lt;%- include('partials/header') %&gt;

&lt;main&gt;
    &lt;h1&gt;&lt;%= title %&gt;&lt;/h1&gt;
    &lt;!-- Your page content --&gt;
&lt;/main&gt;

&lt;%- include('partials/footer') %&gt;
</pre
            >
          </div>

          <div class="key-point">
            <h4>3. Keep Logic Minimal</h4>
            <p>
              Do heavy processing in your routes, not in templates. Templates
              should focus on presentation.
            </p>
          </div>

          <div class="key-point">
            <h4>4. Escape User Input</h4>
            <p>
              Always escape user-generated content to prevent XSS attacks. Use
              <code>&lt;%= %&gt;</code> instead of <code>&lt;%- %&gt;</code> in
              EJS.
            </p>
            <!-- ===================== -->
            <!-- EJS Escaped vs Unescaped Output Analogy -->
            <!-- ===================== -->
            <div
              style="
                border: 2px solid #4caf50;
                border-radius: 8px;
                padding: 16px;
                margin-top: 20px;
                background-color: #f9fff9;
              "
            >
              <h2 style="color: #2e7d32">
                üí° Analogy: Escaped vs Unescaped Output in EJS
              </h2>

              <p>Imagine you are sending a message to display on a web page:</p>

              <p>
                <strong>Message from user:</strong>
                <code>&lt;b&gt;Hello!&lt;/b&gt;</code>
              </p>

              <hr />

              <h3>üîπ Escaped Output (<code>&lt;%= variable %&gt;</code>)</h3>
              <p>
                Think of this as <em>‚Äúdisplaying it safely as plain text‚Äù</em> ‚Äî
                you show what the user typed *literally*, not how the browser
                interprets it.
              </p>

              <div
                style="
                  border: 1px solid #ccc;
                  padding: 8px;
                  background-color: #fff;
                "
              >
                Output: &lt;b&gt;Hello!&lt;/b&gt;
                <br /><small
                  >(Browser shows the tags ‚Äî they are escaped for safety)</small
                >
              </div>

              <h3>üîπ Unescaped Output (<code>&lt;%- variable %&gt;</code>)</h3>
              <p>
                This is like saying <em>‚Äúrender it as HTML‚Äù</em> ‚Äî the browser
                will interpret any HTML inside the string.
              </p>

              <div
                style="
                  border: 1px solid #ccc;
                  padding: 8px;
                  background-color: #fff;
                "
              >
                Output: <b>Hello!</b> <br /><small
                  >(Browser renders the &lt;b&gt; tag ‚Äî bold text
                  appears)</small
                >
              </div>

              <hr />

              <h3>‚ö†Ô∏è Why It Matters:</h3>
              <ul>
                <li>
                  Use <code>&lt;%= %&gt;</code> when displaying user-generated
                  content (safe & secure).
                </li>
                <li>
                  Use <code>&lt;%- %&gt;</code> only for trusted HTML (like
                  templates or icons).
                </li>
                <li>
                  This prevents XSS (Cross-Site Scripting) attacks where
                  malicious users inject harmful code.
                </li>
              </ul>

              <p style="margin-top: 8px; color: #555">
                In short: <strong>Escaped = Safe Display</strong> |
                <strong>Unescaped = Render HTML</strong>
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      function showTab(tabName) {
        // Hide all tabs
        const tabs = document.querySelectorAll(".tab-content");
        tabs.forEach((tab) => tab.classList.remove("active"));

        // Remove active class from all buttons
        const buttons = document.querySelectorAll(".tab-button");
        buttons.forEach((btn) => btn.classList.remove("active"));

        // Show selected tab
        document.getElementById(tabName).classList.add("active");

        // Add active class to clicked button
        event.target.classList.add("active");
      }

      function renderTemplate() {
        const name = document.getElementById("userName").value;
        const age = document.getElementById("userAge").value;
        const city = document.getElementById("userCity").value;

        const output = `
<span style="color: #569cd6;">&lt;!DOCTYPE html&gt;</span>
<span style="color: #569cd6;">&lt;html&gt;</span>
<span style="color: #569cd6;">&lt;head&gt;</span>
    <span style="color: #569cd6;">&lt;title&gt;</span>User Profile<span style="color: #569cd6;">&lt;/title&gt;</span>
<span style="color: #569cd6;">&lt;/head&gt;</span>
<span style="color: #569cd6;">&lt;body&gt;</span>
    <span style="color: #569cd6;">&lt;h1&gt;</span>Welcome, <span style="color: #4ec9b0;">${name}</span>!<span style="color: #569cd6;">&lt;/h1&gt;</span>
    <span style="color: #569cd6;">&lt;p&gt;</span>Age: <span style="color: #4ec9b0;">${age}</span><span style="color: #569cd6;">&lt;/p&gt;</span>
    <span style="color: #569cd6;">&lt;p&gt;</span>City: <span style="color: #4ec9b0;">${city}</span><span style="color: #569cd6;">&lt;/p&gt;</span>
    <span style="color: #569cd6;">&lt;p&gt;</span>This HTML was generated dynamically using template engine concepts!<span style="color: #569cd6;">&lt;/p&gt;</span>
<span style="color: #569cd6;">&lt;/body&gt;</span>
<span style="color: #569cd6;">&lt;/html&gt;</span>
            `;

        document.getElementById("output").innerHTML = output;
      }

      // Render initial template on load
      renderTemplate();
    </script>
  </body>
</html>
