<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Creating HTTP Servers with Node.js</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(135deg, #2d3748 0%, #1a202c 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }
        
        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .content {
            padding: 40px;
        }
        
        .section {
            margin-bottom: 40px;
            padding: 30px;
            background: #f7fafc;
            border-radius: 15px;
            border-left: 5px solid #667eea;
        }
        
        h2 {
            color: #2d3748;
            margin-bottom: 20px;
            font-size: 1.8em;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        h3 {
            color: #4a5568;
            margin: 25px 0 15px 0;
            font-size: 1.3em;
        }
        
        p {
            line-height: 1.8;
            color: #4a5568;
            margin-bottom: 15px;
        }
        
        .analogy {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #f59e0b;
        }
        
        .analogy-title {
            font-weight: bold;
            color: #92400e;
            margin-bottom: 10px;
            font-size: 1.1em;
        }
        
        pre {
            background: #1e293b;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 10px;
            overflow-x: auto;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.95em;
            line-height: 1.6;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .key-point {
            background: #e0e7ff;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #667eea;
        }
        
        .interactive-demo {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin: 20px 0;
        }
        
        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-size: 1em;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }
        
        .output {
            background: #f1f5f9;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            min-height: 60px;
            font-family: monospace;
            color: #1e293b;
        }
        
        .highlight {
            color: #10b981;
            font-weight: bold;
        }
        
        .tab-container {
            margin: 20px 0;
        }
        
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .tab-btn {
            background: #e2e8f0;
            color: #2d3748;
            padding: 10px 20px;
            border-radius: 8px 8px 0 0;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .tab-btn.active {
            background: #667eea;
            color: white;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üöÄ Creating HTTP Servers with Node.js</h1>
            <p class="subtitle">Master the fundamentals of building web servers</p>
        </header>
        
        <div class="content">
            <!-- What is an HTTP Server -->
            <div class="section">
                <h2>üì° What is an HTTP Server?</h2>
                <p>
                    An HTTP server is a program that listens for incoming requests from clients (like web browsers) 
                    and sends back responses. It's the backbone of any web application, handling everything from 
                    serving web pages to processing API requests.
                </p>
                
                <div class="analogy">
                    <div class="analogy-title">üçï Restaurant Analogy</div>
                    <p>
                        Think of an HTTP server like a restaurant:
                        <br><br>
                        <strong>‚Ä¢ The Server (waiter):</strong> Takes orders (requests) and brings food (responses)<br>
                        <strong>‚Ä¢ The Kitchen:</strong> Your application logic that processes requests<br>
                        <strong>‚Ä¢ The Menu:</strong> The different routes/endpoints available<br>
                        <strong>‚Ä¢ Customers:</strong> Clients (browsers, mobile apps) making requests
                    </p>
                </div>
            </div>
            
            <!-- Basic HTTP Server -->
            <div class="section">
                <h2>üîß Creating a Basic HTTP Server</h2>
                <p>
                    Node.js provides a built-in <code>http</code> module that makes creating servers incredibly simple. 
                    Here's the most basic server you can create:
                </p>
                
                <pre>const http = require('http');

// Create a server that responds to all requests
const server = http.createServer((req, res) => {
    // Set the response header
    res.writeHead(200, { 'Content-Type': 'text/plain' });
    
    // Send the response body
    res.end('Hello, World!');
});

// Make the server listen on port 3000
server.listen(3000, () => {
    console.log('Server running at http://localhost:3000/');
});</pre>
                
                <div class="key-point">
                    <strong>üîë Key Concepts:</strong><br>
                    ‚Ä¢ <strong>http.createServer()</strong>: Creates a new HTTP server instance<br>
                    ‚Ä¢ <strong>req (request)</strong>: Contains information about the incoming request<br>
                    ‚Ä¢ <strong>res (response)</strong>: Used to send data back to the client<br>
                    ‚Ä¢ <strong>server.listen()</strong>: Starts the server on a specific port
                </div>
            </div>
            
            <!-- Request and Response -->
            <div class="section">
                <h2>üì® Understanding Request & Response</h2>
                
                <div class="tab-container">
                    <div class="tabs">
                        <div class="tab-btn active" onclick="switchTab(0)">Request Object</div>
                        <div class="tab-btn" onclick="switchTab(1)">Response Object</div>
                    </div>
                    
                    <div class="tab-content active">
                        <h3>The Request Object (req)</h3>
                        <p>
                            The request object contains all information about the incoming HTTP request:
                        </p>
                        <pre>const server = http.createServer((req, res) => {
    // URL of the request
    console.log('URL:', req.url);
    
    // HTTP method (GET, POST, PUT, DELETE, etc.)
    console.log('Method:', req.method);
    
    // Request headers
    console.log('Headers:', req.headers);
    
    // More details
    console.log('HTTP Version:', req.httpVersion);
    
    res.end('Check your console!');
});</pre>
                    </div>
                    
                    <div class="tab-content">
                        <h3>The Response Object (res)</h3>
                        <p>
                            The response object is used to send data back to the client:
                        </p>
                        <pre>const server = http.createServer((req, res) => {
    // Set status code and headers
    res.writeHead(200, {
        'Content-Type': 'application/json',
        'X-Custom-Header': 'MyValue'
    });
    
    // Send JSON response
    const data = {
        message: 'Success',
        timestamp: new Date().toISOString()
    };
    
    res.end(JSON.stringify(data));
});</pre>
                    </div>
                </div>
            </div>
            
            <!-- Routing -->
            <div class="section">
                <h2>üõ£Ô∏è Basic Routing</h2>
                <p>
                    Routing means responding differently based on the URL path requested by the client:
                </p>
                
                <pre>const http = require('http');

const server = http.createServer((req, res) => {
    const url = req.url;
    const method = req.method;
    
    // Home page
    if (url === '/' && method === 'GET') {
        res.writeHead(200, { 'Content-Type': 'text/html' });
        res.end('<h1>Welcome to the Home Page!</h1>');
    }
    
    // About page
    else if (url === '/about' && method === 'GET') {
        res.writeHead(200, { 'Content-Type': 'text/html' });
        res.end('<h1>About Us</h1><p>We build awesome servers!</p>');
    }
    
    // API endpoint
    else if (url === '/api/data' && method === 'GET') {
        res.writeHead(200, { 'Content-Type': 'application/json' });
        res.end(JSON.stringify({ users: 100, active: 75 }));
    }
    
    // 404 - Not Found
    else {
        res.writeHead(404, { 'Content-Type': 'text/html' });
        res.end('<h1>404 - Page Not Found</h1>');
    }
});

server.listen(3000);</pre>
                
                <div class="analogy">
                    <div class="analogy-title">üè¢ Building Directory Analogy</div>
                    <p>
                        Routing is like a building directory at the entrance:
                        <br><br>
                        <strong>‚Ä¢ "/" (root)</strong> ‚Üí Lobby/Reception<br>
                        <strong>‚Ä¢ "/about"</strong> ‚Üí Office on 2nd floor<br>
                        <strong>‚Ä¢ "/api/data"</strong> ‚Üí Data center in basement<br>
                        <strong>‚Ä¢ Unknown paths</strong> ‚Üí "Sorry, that department doesn't exist"
                    </p>
                </div>
            </div>
            
            <!-- Handling POST Requests -->
            <div class="section">
                <h2>üìÆ Handling POST Requests (Receiving Data)</h2>
                <p>
                    POST requests often include data in the request body. We need to collect this data in chunks:
                </p>
                
                <pre>const http = require('http');

const server = http.createServer((req, res) => {
    if (req.url === '/submit' && req.method === 'POST') {
        let body = '';
        
        // Collect data chunks
        req.on('data', chunk => {
            body += chunk.toString();
        });
        
        // When all data is received
        req.on('end', () => {
            try {
                const data = JSON.parse(body);
                console.log('Received:', data);
                
                res.writeHead(200, { 'Content-Type': 'application/json' });
                res.end(JSON.stringify({
                    success: true,
                    message: 'Data received!',
                    received: data
                }));
            } catch (error) {
                res.writeHead(400, { 'Content-Type': 'application/json' });
                res.end(JSON.stringify({ error: 'Invalid JSON' }));
            }
        });
    } else {
        res.writeHead(404);
        res.end('Not Found');
    }
});

server.listen(3000);</pre>
                
                <div class="key-point">
                    <strong>üí° Why Chunks?</strong><br>
                    Data arrives in pieces (chunks) over the network. It's like receiving a book page by page 
                    rather than all at once. This is more efficient for large amounts of data.
                </div>
            </div>
            
            <!-- Interactive Demo -->
            <div class="section">
                <h2>üéÆ Interactive Demo</h2>
                <p>
                    Let's simulate how an HTTP server responds to different requests:
                </p>
                
                <div class="interactive-demo">
                    <h3>Simulate Server Requests</h3>
                    <div style="display: flex; gap: 10px; flex-wrap: wrap; margin: 20px 0;">
                        <button onclick="simulateRequest('/', 'GET')">GET /</button>
                        <button onclick="simulateRequest('/about', 'GET')">GET /about</button>
                        <button onclick="simulateRequest('/api/users', 'GET')">GET /api/users</button>
                        <button onclick="simulateRequest('/api/create', 'POST')">POST /api/create</button>
                        <button onclick="simulateRequest('/unknown', 'GET')">GET /unknown</button>
                    </div>
                    
                    <div id="demo-output" class="output">
                        Click a button to simulate a request...
                    </div>
                </div>
            </div>
            
            <!-- Advanced Concepts -->
            <div class="section">
                <h2>üöÄ Advanced Server Example</h2>
                <p>
                    Here's a more complete server with better organization and error handling:
                </p>
                
                <pre>const http = require('http');

// Server configuration
const PORT = 3000;
const HOST = 'localhost';

// Route handlers
const routes = {
    'GET /': (req, res) => {
        res.writeHead(200, { 'Content-Type': 'text/html' });
        res.end('<h1>Home Page</h1>');
    },
    
    'GET /api/time': (req, res) => {
        res.writeHead(200, { 'Content-Type': 'application/json' });
        res.end(JSON.stringify({
            timestamp: Date.now(),
            date: new Date().toISOString()
        }));
    },
    
    'POST /api/echo': (req, res) => {
        let body = '';
        req.on('data', chunk => body += chunk);
        req.on('end', () => {
            res.writeHead(200, { 'Content-Type': 'application/json' });
            res.end(JSON.stringify({ echo: body }));
        });
    }
};

// Create server
const server = http.createServer((req, res) => {
    const routeKey = `${req.method} ${req.url}`;
    const handler = routes[routeKey];
    
    if (handler) {
        try {
            handler(req, res);
        } catch (error) {
            res.writeHead(500, { 'Content-Type': 'text/plain' });
            res.end('Internal Server Error');
        }
    } else {
        res.writeHead(404, { 'Content-Type': 'text/plain' });
        res.end('404 Not Found');
    }
});

// Start server
server.listen(PORT, HOST, () => {
    console.log(`Server running at http://${HOST}:${PORT}/`);
});

// Graceful shutdown
process.on('SIGTERM', () => {
    server.close(() => {
        console.log('Server shut down gracefully');
    });
});</pre>
            </div>
            
            <!-- Best Practices -->
            <div class="section">
                <h2>‚úÖ Best Practices</h2>
                <div style="display: grid; gap: 15px;">
                    <div class="key-point">
                        <strong>1. Always Set Proper Headers</strong><br>
                        Include Content-Type to tell clients what kind of data they're receiving
                    </div>
                    
                    <div class="key-point">
                        <strong>2. Use Appropriate Status Codes</strong><br>
                        200 (OK), 404 (Not Found), 500 (Server Error), 201 (Created), etc.
                    </div>
                    
                    <div class="key-point">
                        <strong>3. Handle Errors Gracefully</strong><br>
                        Always wrap risky code in try-catch and send proper error responses
                    </div>
                    
                    <div class="key-point">
                        <strong>4. Consider Using Frameworks</strong><br>
                        For production apps, use Express.js, Fastify, or Koa instead of raw http module
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        function switchTab(index) {
            const tabBtns = document.querySelectorAll('.tab-btn');
            const tabContents = document.querySelectorAll('.tab-content');
            
            tabBtns.forEach((btn, i) => {
                if (i === index) {
                    btn.classList.add('active');
                    tabContents[i].classList.add('active');
                } else {
                    btn.classList.remove('active');
                    tabContents[i].classList.remove('active');
                }
            });
        }
        
        function simulateRequest(url, method) {
            const output = document.getElementById('demo-output');
            
            // Simulate request
            output.innerHTML = `<strong>‚Üí Request:</strong> ${method} ${url}<br><br>`;
            
            setTimeout(() => {
                let response = '';
                
                // Simulate different responses
                if (url === '/' && method === 'GET') {
                    response = `<strong>‚Üê Response:</strong><br>
                    <span class="highlight">Status: 200 OK</span><br>
                    Content-Type: text/html<br>
                    Body: &lt;h1&gt;Welcome to the Home Page!&lt;/h1&gt;`;
                } 
                else if (url === '/about' && method === 'GET') {
                    response = `<strong>‚Üê Response:</strong><br>
                    <span class="highlight">Status: 200 OK</span><br>
                    Content-Type: text/html<br>
                    Body: &lt;h1&gt;About Us&lt;/h1&gt;`;
                }
                else if (url === '/api/users' && method === 'GET') {
                    response = `<strong>‚Üê Response:</strong><br>
                    <span class="highlight">Status: 200 OK</span><br>
                    Content-Type: application/json<br>
                    Body: { "users": ["Alice", "Bob", "Charlie"], "count": 3 }`;
                }
                else if (url === '/api/create' && method === 'POST') {
                    response = `<strong>‚Üê Response:</strong><br>
                    <span class="highlight">Status: 201 Created</span><br>
                    Content-Type: application/json<br>
                    Body: { "success": true, "id": "abc123" }`;
                }
                else {
                    response = `<strong>‚Üê Response:</strong><br>
                    <span style="color: #ef4444;">Status: 404 Not Found</span><br>
                    Content-Type: text/plain<br>
                    Body: "Page not found"`;
                }
                
                output.innerHTML += response;
            }, 500);
        }
    </script>
</body>
</html>