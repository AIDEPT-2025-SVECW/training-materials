<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Introduction to Mongoose</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2d3748 0%, #1a202c 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .content {
            padding: 40px;
        }

        .section {
            margin-bottom: 40px;
            padding: 30px;
            background: #f7fafc;
            border-radius: 10px;
            border-left: 5px solid #667eea;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .section:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.2);
        }

        .section h2 {
            color: #2d3748;
            margin-bottom: 20px;
            font-size: 1.8em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section h3 {
            color: #4a5568;
            margin: 25px 0 15px 0;
            font-size: 1.4em;
        }

        .icon {
            font-size: 1.5em;
        }

        .analogy-box {
            background: linear-gradient(135deg, #fef5e7 0%, #f9e79f 100%);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #f39c12;
        }

        .analogy-box strong {
            color: #d68910;
            font-size: 1.1em;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .feature-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0,0,0,0.2);
        }

        .feature-card h4 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        pre {
            background: #1a202c;
            color: #68d391;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            border: 2px solid #667eea;
            font-family: 'Courier New', monospace;
            font-size: 0.95em;
            line-height: 1.6;
        }

        .highlight {
            background: #e6fffa;
            padding: 2px 6px;
            border-radius: 3px;
            color: #234e52;
            font-weight: bold;
        }

        .tab-container {
            margin: 20px 0;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .tab-button {
            padding: 12px 24px;
            background: #e2e8f0;
            border: none;
            border-radius: 8px 8px 0 0;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .tab-button.active {
            background: #667eea;
            color: white;
        }

        .tab-button:hover {
            background: #5a67d8;
            color: white;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .comparison-table th {
            background: #667eea;
            color: white;
            padding: 15px;
            text-align: left;
        }

        .comparison-table td {
            padding: 15px;
            border-bottom: 1px solid #e2e8f0;
            background: white;
        }

        .comparison-table tr:hover td {
            background: #f7fafc;
        }

        .note {
            background: #ebf8ff;
            border-left: 4px solid #3182ce;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .note strong {
            color: #2c5282;
        }

        ul {
            margin-left: 20px;
            margin-top: 10px;
        }

        li {
            margin: 8px 0;
        }

        .workflow {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .workflow-step {
            display: flex;
            align-items: center;
            margin: 15px 0;
            padding: 15px;
            background: #f7fafc;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .workflow-step:hover {
            background: #edf2f7;
            transform: translateX(10px);
        }

        .step-number {
            background: #667eea;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
            flex-shrink: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üçÉ Introduction to Mongoose</h1>
            <p>Your Gateway to Elegant MongoDB Object Modeling</p>
        </div>

        <div class="content">
            <!-- What is Mongoose -->
            <div class="section">
                <h2><span class="icon">ü§î</span>What is Mongoose?</h2>
                <p><strong>Mongoose</strong> is an Object Data Modeling (ODM) library for MongoDB and Node.js. It provides a straightforward, schema-based solution to model your application data.</p>
                
                <div class="analogy-box">
                    <strong>üéØ Real-World Analogy:</strong>
                    <p>Think of MongoDB as a giant warehouse where you can store anything anywhere. Mongoose is like a sophisticated inventory management system that:</p>
                    <ul>
                        <li>Creates organized shelves with labels (Schemas)</li>
                        <li>Ensures items are stored in the right format (Validation)</li>
                        <li>Makes it easy to find and retrieve items (Query Methods)</li>
                        <li>Maintains consistency in how items are organized (Models)</li>
                    </ul>
                </div>

                <p>While MongoDB gives you flexibility to store any data structure, Mongoose adds structure, validation, and helpful utilities to make working with your data more reliable and maintainable.</p>
            </div>

            <!-- Why Do We Need Mongoose -->
            <div class="section">
                <h2><span class="icon">üí°</span>Why Do We Need Mongoose?</h2>
                
                <div class="feature-grid">
                    <div class="feature-card">
                        <h4>üîê Data Validation</h4>
                        <p>Ensures data integrity before it reaches the database. No more garbage data!</p>
                    </div>
                    <div class="feature-card">
                        <h4>üìã Schema Definition</h4>
                        <p>Define the structure of your documents with clear, maintainable schemas.</p>
                    </div>
                    <div class="feature-card">
                        <h4>üéØ Type Casting</h4>
                        <p>Automatically converts data to the correct type (strings to numbers, etc.)</p>
                    </div>
                    <div class="feature-card">
                        <h4>üîç Query Building</h4>
                        <p>Provides intuitive methods to query your database with ease.</p>
                    </div>
                    <div class="feature-card">
                        <h4>üîó Relationships</h4>
                        <p>Easily define and populate relationships between documents.</p>
                    </div>
                    <div class="feature-card">
                        <h4>ü™ù Middleware</h4>
                        <p>Add pre/post hooks to run code before or after certain operations.</p>
                    </div>
                </div>

                <h3>Without Mongoose vs With Mongoose</h3>
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Aspect</th>
                            <th>Native MongoDB Driver</th>
                            <th>With Mongoose</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Schema</strong></td>
                            <td>No schema enforcement</td>
                            <td>Clear schema definition with validation</td>
                        </tr>
                        <tr>
                            <td><strong>Validation</strong></td>
                            <td>Manual validation needed</td>
                            <td>Built-in validation rules</td>
                        </tr>
                        <tr>
                            <td><strong>Relationships</strong></td>
                            <td>Manual reference management</td>
                            <td>Easy populate() method</td>
                        </tr>
                        <tr>
                            <td><strong>Type Casting</strong></td>
                            <td>Manual type conversion</td>
                            <td>Automatic type casting</td>
                        </tr>
                        <tr>
                            <td><strong>Middleware</strong></td>
                            <td>Complex custom implementation</td>
                            <td>Built-in pre/post hooks</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Installation and Setup -->
            <div class="section">
                <h2><span class="icon">‚öôÔ∏è</span>Installation and Setup</h2>
                
                <h3>Step 1: Install Mongoose</h3>
                <pre>npm install mongoose</pre>

                <h3>Step 2: Connect to MongoDB</h3>
                <pre>const express = require('express');
const mongoose = require('mongoose');

const app = express();

// Connect to MongoDB
mongoose.connect('mongodb://localhost:27017/schoolDB', {
    useNewUrlParser: true,
    useUnifiedTopology: true
})
.then(() => console.log('‚úÖ Connected to MongoDB'))
.catch(err => console.error('‚ùå Connection error:', err));

app.listen(3000, () => {
    console.log('Server running on port 3000');
});</pre>

                <div class="note">
                    <strong>üìù Note:</strong> The database name 'schoolDB' will be automatically created if it doesn't exist when you first insert data.
                </div>
            </div>

            <!-- Core Concepts -->
            <div class="section">
                <h2><span class="icon">üéì</span>Core Concepts</h2>

                <div class="tab-container">
                    <div class="tabs">
                        <button class="tab-button active" onclick="switchTab(event, 'schema')">Schema</button>
                        <button class="tab-button" onclick="switchTab(event, 'model')">Model</button>
                        <button class="tab-button" onclick="switchTab(event, 'document')">Document</button>
                    </div>

                    <div id="schema" class="tab-content active">
                        <h3>üìã Schema</h3>
                        <p>A schema defines the structure of documents within a collection. It's like a blueprint.</p>
                        
                        <div class="analogy-box">
                            <strong>üèóÔ∏è Analogy:</strong> Think of a schema as an application form. It defines what fields are required (Name, Age, Email), what type of data goes in each field (text, number), and what rules must be followed (email must be valid, age must be positive).
                        </div>

                        <pre>const mongoose = require('mongoose');

// Define a Schema
const studentSchema = new mongoose.Schema({
    name: {
        type: String,
        required: [true, 'Name is required'],
        trim: true,
        minlength: [2, 'Name must be at least 2 characters']
    },
    age: {
        type: Number,
        required: true,
        min: [5, 'Age must be at least 5'],
        max: [100, 'Age cannot exceed 100']
    },
    email: {
        type: String,
        required: true,
        unique: true,
        lowercase: true,
        match: [/^\S+@\S+\.\S+$/, 'Please enter a valid email']
    },
    grade: {
        type: String,
        enum: ['A', 'B', 'C', 'D', 'F'],
        default: 'C'
    },
    subjects: [String],
    enrolledDate: {
        type: Date,
        default: Date.now
    },
    isActive: {
        type: Boolean,
        default: true
    }
});</pre>
                    </div>

                    <div id="model" class="tab-content">
                        <h3>üè≠ Model</h3>
                        <p>A model is a constructor compiled from a Schema. It provides an interface to interact with the database.</p>
                        
                        <div class="analogy-box">
                            <strong>üè≠ Analogy:</strong> If a Schema is a blueprint, then a Model is the factory that produces actual products (documents) based on that blueprint. It's what you use to create, read, update, and delete documents.
                        </div>

                        <pre>// Create a Model from the Schema
const Student = mongoose.model('Student', studentSchema);

// Now 'Student' is a model that can:
// 1. Create new student documents
// 2. Query existing students
// 3. Update student data
// 4. Delete students

// The model name 'Student' will create a collection named 'students'
// (MongoDB automatically pluralizes and lowercases it)</pre>
                    </div>

                    <div id="document" class="tab-content">
                        <h3>üìÑ Document</h3>
                        <p>A document is an instance of a Model. It represents a single record in the MongoDB collection.</p>
                        
                        <div class="analogy-box">
                            <strong>üìÑ Analogy:</strong> If the Model is a student registration form template, then a Document is a filled-out form for a specific student like Priya or Arjun. Each document is an actual student record in your database.
                        </div>

                        <pre>// Create a new document (instance of the Student model)
const priya = new Student({
    name: 'Priya Sharma',
    age: 16,
    email: 'priya.sharma@email.com',
    grade: 'A',
    subjects: ['Mathematics', 'Physics', 'Chemistry']
});

// Save the document to the database
priya.save()
    .then(doc => console.log('Student saved:', doc))
    .catch(err => console.error('Error:', err));</pre>
                    </div>
                </div>
            </div>

            <!-- CRUD Operations -->
            <div class="section">
                <h2><span class="icon">üî®</span>CRUD Operations with Mongoose</h2>

                <h3>Create Operations</h3>
                <pre>// Method 1: Create and Save
const rahul = new Student({
    name: 'Rahul Kumar',
    age: 17,
    email: 'rahul.kumar@email.com',
    subjects: ['Biology', 'English']
});
await rahul.save();

// Method 2: Direct Create
const ananya = await Student.create({
    name: 'Ananya Reddy',
    age: 15,
    email: 'ananya.reddy@email.com',
    grade: 'B',
    subjects: ['History', 'Geography']
});

// Method 3: Create Multiple
await Student.insertMany([
    { name: 'Vikram Singh', age: 16, email: 'vikram@email.com' },
    { name: 'Sneha Patel', age: 17, email: 'sneha@email.com' }
]);</pre>

                <h3>Read Operations</h3>
                <pre>// Find all students
const allStudents = await Student.find();

// Find with conditions
const topStudents = await Student.find({ grade: 'A' });

// Find one student
const student = await Student.findOne({ email: 'priya.sharma@email.com' });

// Find by ID
const studentById = await Student.findById('60a7c5f9e6f5a4c3b8d4e5f6');

// Find with specific fields only
const names = await Student.find().select('name email -_id');

// Find with sorting and limiting
const recentStudents = await Student.find()
    .sort({ enrolledDate: -1 })
    .limit(5);

// Find with conditions and operators
const teenStudents = await Student.find({
    age: { $gte: 13, $lte: 19 },
    isActive: true
});</pre>

                <h3>Update Operations</h3>
                <pre>// Update one document
await Student.updateOne(
    { email: 'priya.sharma@email.com' },
    { grade: 'A+', age: 17 }
);

// Update many documents
await Student.updateMany(
    { grade: 'D' },
    { $set: { isActive: false } }
);

// Find and update (returns the updated document)
const updated = await Student.findByIdAndUpdate(
    '60a7c5f9e6f5a4c3b8d4e5f6',
    { grade: 'A' },
    { new: true } // Returns updated document
);

// Find one and update
const updatedStudent = await Student.findOneAndUpdate(
    { email: 'rahul.kumar@email.com' },
    { $push: { subjects: 'Computer Science' } },
    { new: true }
);</pre>

                <h3>Delete Operations</h3>
                <pre>// Delete one document
await Student.deleteOne({ email: 'old@email.com' });

// Delete many documents
await Student.deleteMany({ isActive: false });

// Find and delete (returns the deleted document)
const deleted = await Student.findByIdAndDelete('60a7c5f9e6f5a4c3b8d4e5f6');

// Find one and delete
const deletedStudent = await Student.findOneAndDelete(
    { email: 'removed@email.com' }
);</pre>
            </div>

            <!-- Express Integration -->
            <div class="section">
                <h2><span class="icon">üöÄ</span>Complete Express + Mongoose Example</h2>
                <p>Here's how to build a complete REST API with Express and Mongoose:</p>

                <pre>const express = require('express');
const mongoose = require('mongoose');

const app = express();
app.use(express.json());

// Connect to MongoDB
mongoose.connect('mongodb://localhost:27017/schoolDB')
    .then(() => console.log('Connected to MongoDB'))
    .catch(err => console.error('Error:', err));

// Define Schema and Model
const studentSchema = new mongoose.Schema({
    name: { type: String, required: true },
    age: { type: Number, required: true },
    email: { type: String, required: true, unique: true },
    grade: { type: String, enum: ['A', 'B', 'C', 'D', 'F'] },
    subjects: [String]
});

const Student = mongoose.model('Student', studentSchema);

// CREATE - Add new student
app.post('/students', async (req, res) => {
    try {
        const student = await Student.create(req.body);
        res.status(201).json({
            success: true,
            data: student
        });
    } catch (error) {
        res.status(400).json({
            success: false,
            error: error.message
        });
    }
});

// READ - Get all students
app.get('/students', async (req, res) => {
    try {
        const students = await Student.find();
        res.json({
            success: true,
            count: students.length,
            data: students
        });
    } catch (error) {
        res.status(500).json({
            success: false,
            error: error.message
        });
    }
});

// READ - Get single student by ID
app.get('/students/:id', async (req, res) => {
    try {
        const student = await Student.findById(req.params.id);
        if (!student) {
            return res.status(404).json({
                success: false,
                error: 'Student not found'
            });
        }
        res.json({
            success: true,
            data: student
        });
    } catch (error) {
        res.status(500).json({
            success: false,
            error: error.message
        });
    }
});

// UPDATE - Update student
app.put('/students/:id', async (req, res) => {
    try {
        const student = await Student.findByIdAndUpdate(
            req.params.id,
            req.body,
            { new: true, runValidators: true }
        );
        if (!student) {
            return res.status(404).json({
                success: false,
                error: 'Student not found'
            });
        }
        res.json({
            success: true,
            data: student
        });
    } catch (error) {
        res.status(400).json({
            success: false,
            error: error.message
        });
    }
});

// DELETE - Remove student
app.delete('/students/:id', async (req, res) => {
    try {
        const student = await Student.findByIdAndDelete(req.params.id);
        if (!student) {
            return res.status(404).json({
                success: false,
                error: 'Student not found'
            });
        }
        res.json({
            success: true,
            message: 'Student deleted successfully'
        });
    } catch (error) {
        res.status(500).json({
            success: false,
            error: error.message
        });
    }
});

app.listen(3000, () => {
    console.log('Server running on http://localhost:3000');
});</pre>
            </div>

            <!-- Workflow -->
            <div class="section">
                <h2><span class="icon">üîÑ</span>Mongoose Workflow</h2>
                <div class="workflow">
                    <div class="workflow-step">
                        <div class="step-number">1</div>
                        <div>
                            <strong>Install & Import Mongoose</strong>
                            <p>Install mongoose package and import it into your application</p>
                        </div>
                    </div>
                    <div class="workflow-step">
                        <div class="step-number">2</div>
                        <div>
                            <strong>Connect to MongoDB</strong>
                            <p>Establish connection using mongoose.connect()</p>
                        </div>
                    </div>
                    <div class="workflow-step">
                        <div class="step-number">3</div>
                        <div>
                            <strong>Define Schema</strong>
                            <p>Create a schema defining structure and validation rules</p>
                        </div>
                    </div>
                    <div class="workflow-step">
                        <div class="step-number">4</div>
                        <div>
                            <strong>Create Model</strong>
                            <p>Compile schema into a model for database operations</p>
                        </div>
                    </div>
                    <div class="workflow-step">
                        <div class="step-number">5</div>
                        <div>
                            <strong>Perform CRUD Operations</strong>
                            <p>Use model methods to create, read, update, and delete documents</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Key Takeaways -->
            <div class="section">
                <h2><span class="icon">üéØ</span>Key Takeaways</h2>
                <ul>
                    <li><strong>Mongoose adds structure</strong> to MongoDB's flexible document model through schemas</li>
                    <li><strong>Schemas define</strong> the shape of documents, data types, and validation rules</li>
                    <li><strong>Models are constructors</strong> created from schemas that interact with the database</li>
                    <li><strong>Documents are instances</strong> of models representing individual database records</li>
                    <li><strong>Built-in validation</strong> ensures data integrity before saving to the database</li>
                    <li><strong>Intuitive query methods</strong> make database operations cleaner and easier</li>
                    <li><strong>Middleware hooks</strong> allow you to run code before/after certain operations</li>
                    <li><strong>Perfect for Express APIs</strong> - Mongoose integrates seamlessly with Express.js</li>
                </ul>

                <div class="note">
                    <strong>üí° Remember:</strong> Mongoose doesn't change how MongoDB works - it adds a layer of convenience, validation, and structure on top of it, making your application more robust and maintainable!
                </div>
            </div>
        </div>
    </div>

    <script>
        function switchTab(event, tabId) {
            // Hide all tab contents
            const contents = document.querySelectorAll('.tab-content');
            contents.forEach(content => content.classList.remove('active'));

            // Remove active class from all buttons
            const buttons = document.querySelectorAll('.tab-button');
            buttons.forEach(button => button.classList.remove('active'));

            // Show selected tab and mark button as active
            document.getElementById(tabId).classList.add('active');
            event.currentTarget.classList.add('active');
        }
    </script>
</body>
</html>