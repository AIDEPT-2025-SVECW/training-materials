<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript Event Handling - Interactive Demo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        
        h1 {
            color: #667eea;
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.5em;
        }
        
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-style: italic;
        }
        
        .section {
            margin-bottom: 40px;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 5px solid #667eea;
        }
        
        h2 {
            color: #764ba2;
            margin-bottom: 15px;
            font-size: 1.8em;
        }
        
        .concept {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            border-left: 4px solid #2196F3;
        }
        
        .analogy {
            background: #fff3e0;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #ff9800;
        }
        
        .analogy::before {
            content: "üí° Analogy: ";
            font-weight: bold;
            color: #ff9800;
        }
        
        .demo-box {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border: 2px solid #ddd;
        }
        
        .demo-title {
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
            font-size: 1.1em;
        }
        
        button {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
            transition: all 0.3s;
        }
        
        button:hover {
            background: #764ba2;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        input[type="text"], input[type="email"] {
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            width: 100%;
            max-width: 300px;
            margin: 5px 0;
        }
        
        input:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .output {
            background: #f0f0f0;
            padding: 15px;
            border-radius: 5px;
            margin-top: 15px;
            min-height: 50px;
            font-family: monospace;
            white-space: pre-wrap;
        }
        
        pre {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
            font-size: 14px;
            line-height: 1.5;
        }
        
        code {
            font-family: 'Courier New', monospace;
        }
        
        .propagation-demo {
            border: 3px solid #ff5722;
            padding: 20px;
            margin: 10px 0;
            border-radius: 8px;
            cursor: pointer;
        }
        
        .propagation-demo .child {
            border: 3px solid #4caf50;
            padding: 20px;
            margin: 10px;
            border-radius: 8px;
        }
        
        .propagation-demo .grandchild {
            border: 3px solid #2196f3;
            padding: 20px;
            margin: 10px;
            border-radius: 8px;
        }
        
        .log-entry {
            padding: 5px;
            margin: 2px 0;
            background: #e8f5e9;
            border-left: 3px solid #4caf50;
            border-radius: 3px;
        }
        
        .highlight {
            background: yellow;
            padding: 2px 5px;
            border-radius: 3px;
        }
        
        .grid-demo {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin: 15px 0;
        }
        
        .grid-item {
            background: #667eea;
            color: white;
            padding: 20px;
            text-align: center;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .grid-item:hover {
            transform: scale(1.05);
            background: #764ba2;
        }
        
        .train-coach {
            display: inline-block;
            background: #ff9800;
            color: white;
            padding: 15px 25px;
            margin: 5px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            border: 3px solid #f57c00;
        }
        
        .train-coach:hover {
            background: #f57c00;
            transform: translateY(-5px);
        }
        
        .key-pressed {
            font-size: 3em;
            text-align: center;
            color: #667eea;
            font-weight: bold;
            padding: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéØ JavaScript Event Handling</h1>
        <p class="subtitle">Deep Dive into Events, Listeners, Event Objects & Propagation</p>
        
        <!-- Section 1: onclick Events -->
        <div class="section">
            <h2>1. onclick Events</h2>
            
            <div class="concept">
                <strong>Concept:</strong> The simplest way to handle events by directly assigning a function to an element's onclick property (inline or via JS).
            </div>
            
            <div class="analogy">
                A <span class="highlight">doorbell button</span> at your home. When someone presses it (onclick), it directly rings the bell (executes function). Simple, one button = one action.
            </div>
            
            <div class="demo-box">
                <div class="demo-title">üé™ Interactive Demo: onclick Methods</div>
                
                <!-- Method 1: Inline onclick -->
                <button onclick="alert('üì± This is inline onclick!')">Method 1: Inline onclick</button>
                
                <!-- Method 2: Property assignment -->
                <button id="btn-property">Method 2: Property Assignment</button>
                
                <!-- Method 3: Multiple clicks counter -->
                <button id="btn-counter">Click Me! (Count: <span id="click-count">0</span>)</button>
                
                <div class="output" id="onclick-output">Click any button above to see the result...</div>
            </div>
            
            <pre><code>// Method 1: Inline HTML (Not recommended for complex logic)
&lt;button onclick="alert('Hello!')"&gt;Click Me&lt;/button&gt;

// Method 2: Property assignment in JavaScript
const btn = document.getElementById('myBtn');
btn.onclick = function() {
    console.log('Button clicked!');
};

// Limitation: Only ONE function can be assigned
btn.onclick = function() {
    console.log('This will REPLACE the previous function');
};</code></pre>
        </div>
        
        <!-- Section 2: addEventListener -->
        <div class="section">
            <h2>2. addEventListener - The Modern Way</h2>
            
            <div class="concept">
                <strong>Concept:</strong> Attaches multiple event handlers to an element without overwriting existing ones. More flexible and powerful than onclick.
            </div>
            
            <div class="analogy">
                Like a <span class="highlight">railway station announcement system</span>. Multiple people (functions) can listen to the same train arrival (event). When the train arrives, ALL listeners get notified, not just one.
            </div>
            
            <div class="demo-box">
                <div class="demo-title">üé™ Interactive Demo: Multiple Listeners</div>
                
                <button id="btn-multi">Click Me - Multiple Actions!</button>
                
                <div class="output" id="multi-output">Actions will appear here...</div>
                
                <div style="margin-top: 15px;">
                    <strong>Indian Cricket Score Board Demo:</strong><br>
                    <button id="btn-boundary">Hit a Boundary! üèè</button>
                    <div class="output" id="cricket-output">Waiting for action...</div>
                </div>
            </div>
            
            <pre><code>// addEventListener allows MULTIPLE handlers
const button = document.getElementById('myBtn');

// First listener
button.addEventListener('click', function() {
    console.log('First action executed');
});

// Second listener (both will execute!)
button.addEventListener('click', function() {
    console.log('Second action also executed');
});

// Third listener with arrow function
button.addEventListener('click', () => {
    console.log('Third action too!');
});

// You can also remove listeners
function myHandler() {
    console.log('Removable handler');
}
button.addEventListener('click', myHandler);
button.removeEventListener('click', myHandler); // Removes it</code></pre>
        </div>
        
        <!-- Section 3: Event Object -->
        <div class="section">
            <h2>3. The Event Object</h2>
            
            <div class="concept">
                <strong>Concept:</strong> Every event handler receives an event object containing detailed information about what happened (mouse position, key pressed, target element, etc.).
            </div>
            
            <div class="analogy">
                Like a <span class="highlight">parcel tracking slip</span> in India Post. It tells you: what item (event.type), who sent it (event.target), when it arrived (event.timeStamp), and where it came from (event.currentTarget).
            </div>
            
            <div class="demo-box">
                <div class="demo-title">üé™ Interactive Demo: Event Object Properties</div>
                
                <button id="btn-event-info">Click Me to See Event Details</button>
                <div class="output" id="event-info-output">Click the button...</div>
                
                <div style="margin-top: 20px;">
                    <strong>Mouse Tracking Demo:</strong><br>
                    <div id="mouse-area" style="background: #e3f2fd; padding: 40px; border-radius: 8px; cursor: crosshair; text-align: center;">
                        Move your mouse here üñ±Ô∏è
                        <div id="mouse-coords" style="margin-top: 10px; font-weight: bold; color: #1976d2;"></div>
                    </div>
                </div>
                
                <div style="margin-top: 20px;">
                    <strong>Keyboard Event Demo:</strong><br>
                    <input type="text" id="key-input" placeholder="Type something here...">
                    <div class="key-pressed" id="key-display">‚å®Ô∏è</div>
                </div>
            </div>
            
            <pre><code>// The event object contains rich information
button.addEventListener('click', function(event) {
    console.log('Event Type:', event.type);           // 'click'
    console.log('Target Element:', event.target);     // element clicked
    console.log('Current Target:', event.currentTarget); // element with listener
    console.log('Timestamp:', event.timeStamp);       // when it happened
    console.log('Mouse X:', event.clientX);           // mouse X position
    console.log('Mouse Y:', event.clientY);           // mouse Y position
});

// Keyboard events
input.addEventListener('keydown', function(event) {
    console.log('Key Pressed:', event.key);           // which key
    console.log('Key Code:', event.code);             // physical key
    console.log('Ctrl held?', event.ctrlKey);         // modifier keys
    console.log('Shift held?', event.shiftKey);
});

// Preventing default behavior
link.addEventListener('click', function(event) {
    event.preventDefault(); // Stop default action (like navigation)
    console.log('Link click prevented!');
});</code></pre>
        </div>
        
        <!-- Section 4: Event Propagation -->
        <div class="section">
            <h2>4. Event Propagation (Bubbling & Capturing)</h2>
            
            <div class="concept">
                <strong>Concept:</strong> Events travel through the DOM tree in two phases: Capturing (top-down) and Bubbling (bottom-up). Understanding this is crucial for complex applications.
            </div>
            
            <div class="analogy">
                Like a <span class="highlight">train journey from Mumbai to Goa</span>. <br>
                <strong>Capturing Phase:</strong> Train starts at Mumbai (root), passes through stations (parents) before reaching Goa (target).<br>
                <strong>Bubbling Phase:</strong> After reaching Goa, the announcement bubbles back through all stations to Mumbai.
            </div>
            
            <div class="demo-box">
                <div class="demo-title">üé™ Interactive Demo: Event Propagation</div>
                
                <div class="propagation-demo" id="grandparent">
                    <strong>üë¥ Grandparent (Red Border)</strong>
                    <div class="propagation-demo child" id="parent">
                        <strong>üë® Parent (Green Border)</strong>
                        <div class="propagation-demo grandchild" id="child">
                            <strong>üë∂ Child (Blue Border)</strong>
                            Click Me!
                        </div>
                    </div>
                </div>
                
                <div style="margin-top: 15px;">
                    <button id="btn-clear-log">Clear Log</button>
                    <label style="margin-left: 15px;">
                        <input type="checkbox" id="use-capture"> Use Capture Phase
                    </label>
                    <label style="margin-left: 15px;">
                        <input type="checkbox" id="stop-propagation"> Stop Propagation at Child
                    </label>
                </div>
                
                <div class="output" id="propagation-log">Event log will appear here... Click the child element!</div>
                
                <div style="margin-top: 20px;">
                    <strong>üöÇ Train Coach Demo (Click any coach):</strong><br>
                    <div id="train-container">
                        <span class="train-coach" data-coach="AC 1">AC 1 üõèÔ∏è</span>
                        <span class="train-coach" data-coach="AC 2">AC 2 üõèÔ∏è</span>
                        <span class="train-coach" data-coach="Sleeper">Sleeper üõå</span>
                        <span class="train-coach" data-coach="General">General üí∫</span>
                    </div>
                    <div class="output" id="train-log">Click any coach...</div>
                </div>
            </div>
            
            <pre><code>// Event Bubbling (default behavior)
// Event travels from child ‚Üí parent ‚Üí grandparent

grandparent.addEventListener('click', () => {
    console.log('Grandparent clicked');
});

parent.addEventListener('click', () => {
    console.log('Parent clicked');
});

child.addEventListener('click', () => {
    console.log('Child clicked');
});

// Clicking child logs: "Child clicked" ‚Üí "Parent clicked" ‚Üí "Grandparent clicked"

// Event Capturing (reverse order)
// Set third parameter to true for capture phase
grandparent.addEventListener('click', () => {
    console.log('Grandparent clicked');
}, true); // Capture phase!

// Now clicking child logs: "Grandparent clicked" ‚Üí "Parent clicked" ‚Üí "Child clicked"

// Stopping Propagation
child.addEventListener('click', (event) => {
    console.log('Child clicked');
    event.stopPropagation(); // Stops bubbling to parent
});

// Now only "Child clicked" is logged

// Event Delegation (Efficient for multiple children)
// Instead of adding listeners to each coach, listen on container
document.getElementById('train-container').addEventListener('click', (event) => {
    if (event.target.classList.contains('train-coach')) {
        console.log('Coach clicked:', event.target.dataset.coach);
    }
});</code></pre>
        </div>
        
        <!-- Comparison Section -->
        <div class="section">
            <h2>üìä Quick Comparison: onclick vs addEventListener</h2>
            
            <table style="width: 100%; border-collapse: collapse; margin-top: 15px;">
                <tr style="background: #667eea; color: white;">
                    <th style="padding: 12px; border: 1px solid #ddd;">Feature</th>
                    <th style="padding: 12px; border: 1px solid #ddd;">onclick</th>
                    <th style="padding: 12px; border: 1px solid #ddd;">addEventListener</th>
                </tr>
                <tr>
                    <td style="padding: 12px; border: 1px solid #ddd;"><strong>Multiple Handlers</strong></td>
                    <td style="padding: 12px; border: 1px solid #ddd;">‚ùå No (overwrites)</td>
                    <td style="padding: 12px; border: 1px solid #ddd;">‚úÖ Yes</td>
                </tr>
                <tr>
                    <td style="padding: 12px; border: 1px solid #ddd;"><strong>Remove Handler</strong></td>
                    <td style="padding: 12px; border: 1px solid #ddd;">Set to null</td>
                    <td style="padding: 12px; border: 1px solid #ddd;">removeEventListener()</td>
                </tr>
                <tr>
                    <td style="padding: 12px; border: 1px solid #ddd;"><strong>Capture Phase</strong></td>
                    <td style="padding: 12px; border: 1px solid #ddd;">‚ùå No</td>
                    <td style="padding: 12px; border: 1px solid #ddd;">‚úÖ Yes (3rd param)</td>
                </tr>
                <tr>
                    <td style="padding: 12px; border: 1px solid #ddd;"><strong>Best For</strong></td>
                    <td style="padding: 12px; border: 1px solid #ddd;">Simple, single handlers</td>
                    <td style="padding: 12px; border: 1px solid #ddd;">Complex applications</td>
                </tr>
            </table>
        </div>
        
        <!-- Best Practices -->
        <div class="section">
            <h2>‚úÖ Best Practices</h2>
            <ul style="margin-left: 20px; line-height: 2;">
                <li>‚úÖ <strong>Always use addEventListener</strong> for production code</li>
                <li>‚úÖ <strong>Use event delegation</strong> for dynamic content (events on parent)</li>
                <li>‚úÖ <strong>Store event object</strong> reference when you need it later</li>
                <li>‚úÖ <strong>Clean up listeners</strong> with removeEventListener when elements are removed</li>
                <li>‚úÖ <strong>Prevent default</strong> carefully - ensure you understand the consequence</li>
                <li>‚ö†Ô∏è Avoid inline onclick in HTML (separation of concerns)</li>
                <li>‚ö†Ô∏è Be cautious with stopPropagation() - can break parent handlers</li>
            </ul>
        </div>
    </div>
    
    <script>
        // Section 1: onclick demos
        document.getElementById('btn-property').onclick = function() {
            document.getElementById('onclick-output').textContent = 
                '‚úÖ Property assignment onclick fired! This method allows one function per element.';
        };
        
        let clickCount = 0;
        document.getElementById('btn-counter').onclick = function() {
            clickCount++;
            document.getElementById('click-count').textContent = clickCount;
            document.getElementById('onclick-output').textContent = 
                `üéâ Button clicked ${clickCount} times! This demonstrates state management with onclick.`;
        };
        
        // Section 2: addEventListener demos
        const btnMulti = document.getElementById('btn-multi');
        const multiOutput = document.getElementById('multi-output');
        
        // Multiple listeners on same button
        btnMulti.addEventListener('click', function() {
            multiOutput.innerHTML = '<div class="log-entry">1Ô∏è‚É£ First listener executed</div>';
        });
        
        btnMulti.addEventListener('click', function() {
            multiOutput.innerHTML += '<div class="log-entry">2Ô∏è‚É£ Second listener executed</div>';
        });
        
        btnMulti.addEventListener('click', function() {
            multiOutput.innerHTML += '<div class="log-entry">3Ô∏è‚É£ Third listener executed</div>';
            multiOutput.innerHTML += '<div class="log-entry">‚úÖ All three ran independently!</div>';
        });
        
        // Cricket demo
        const btnBoundary = document.getElementById('btn-boundary');
        const cricketOutput = document.getElementById('cricket-output');
        
        btnBoundary.addEventListener('click', function() {
            cricketOutput.innerHTML = '<div class="log-entry">üèè Ball hit!</div>';
        });
        
        btnBoundary.addEventListener('click', function() {
            cricketOutput.innerHTML += '<div class="log-entry">üìä Score updated: +4 runs</div>';
        });
        
        btnBoundary.addEventListener('click', function() {
            cricketOutput.innerHTML += '<div class="log-entry">üì¢ Commentator: "What a shot!"</div>';
        });
        
        btnBoundary.addEventListener('click', function() {
            cricketOutput.innerHTML += '<div class="log-entry">üëè Crowd cheering!</div>';
        });
        
        // Section 3: Event object demos
        document.getElementById('btn-event-info').addEventListener('click', function(event) {
            const output = document.getElementById('event-info-output');
            output.innerHTML = `
                <div class="log-entry"><strong>Event Type:</strong> ${event.type}</div>
                <div class="log-entry"><strong>Target:</strong> ${event.target.tagName} (${event.target.id})</div>
                <div class="log-entry"><strong>Timestamp:</strong> ${event.timeStamp.toFixed(2)}ms</div>
                <div class="log-entry"><strong>Mouse Position:</strong> X: ${event.clientX}px, Y: ${event.clientY}px</div>
                <div class="log-entry"><strong>Button Pressed:</strong> ${event.button} (0=left, 1=middle, 2=right)</div>
                <div class="log-entry"><strong>Ctrl Key:</strong> ${event.ctrlKey ? 'Yes ‚úÖ' : 'No ‚ùå'}</div>
                <div class="log-entry"><strong>Shift Key:</strong> ${event.shiftKey ? 'Yes ‚úÖ' : 'No ‚ùå'}</div>
            `;
        });
        
        // Mouse tracking
        const mouseArea = document.getElementById('mouse-area');
        const mouseCoords = document.getElementById('mouse-coords');
        
        mouseArea.addEventListener('mousemove', function(event) {
            const rect = mouseArea.getBoundingClientRect();
            const x = event.clientX - rect.left;
            const y = event.clientY - rect.top;
            mouseCoords.textContent = `X: ${Math.round(x)}px | Y: ${Math.round(y)}px`;
        });
        
        // Keyboard events
        const keyInput = document.getElementById('key-input');
        const keyDisplay = document.getElementById('key-display');
        
        keyInput.addEventListener('keydown', function(event) {
            keyDisplay.textContent = event.key.toUpperCase();
            keyDisplay.style.color = event.shiftKey ? '#f44336' : '#667eea';
        });
        
        // Section 4: Event propagation
        const grandparent = document.getElementById('grandparent');
        const parent = document.getElementById('parent');
        const child = document.getElementById('child');
        const propagationLog = document.getElementById('propagation-log');
        const useCaptureCheckbox = document.getElementById('use-capture');
        const stopPropCheckbox = document.getElementById('stop-propagation');
        
        function setupPropagationListeners() {
            // Remove all existing listeners by cloning
            const newGrandparent = grandparent.cloneNode(true);
            const newParent = newGrandparent.querySelector('#parent');
            const newChild = newGrandparent.querySelector('#child');
            grandparent.parentNode.replaceChild(newGrandparent, grandparent);
            
            const useCapture = useCaptureCheckbox.checked;
            
            newGrandparent.addEventListener('click', function(e) {
                if (e.target === newGrandparent) {
                    propagationLog.innerHTML += '<div class="log-entry" style="border-color: #f44336;">üë¥ Grandparent handler triggered</div>';
                }
            }, useCapture);
            
            newParent.addEventListener('click', function(e) {
                if (e.target === newParent) {
                    propagationLog.innerHTML += '<div class="log-entry" style="border-color: #4caf50;">üë® Parent handler triggered</div>';
                }
            }, useCapture);
            
            newChild.addEventListener('click', function(e) {
                propagationLog.innerHTML += '<div class="log-entry" style="border-color: #2196f3;">üë∂ Child handler triggered</div>';
                
                if (stopPropCheckbox.checked) {
                    e.stopPropagation();
                    propagationLog.innerHTML += '<div class="log-entry" style="background: #ffebee;">üõë Propagation stopped at child!</div>';
                }
            }, useCapture);
        }
        
        setupPropagationListeners();
        useCaptureCheckbox.addEventListener('change', setupPropagationListeners);
        stopPropCheckbox.addEventListener('change', setupPropagationListeners);
        
        document.getElementById('btn-clear-log').addEventListener('click', function() {
            propagationLog.innerHTML = 'Event log cleared. Click the child element!';
        });
        
        // Train demo (event delegation)
        document.getElementById('train-container').addEventListener('click', function(event) {
            if (event.target.classList.contains('train-coach')) {
                const coach = event.target.dataset.coach;
                const trainLog = document.getElementById('train-log');
                trainLog.innerHTML = `
                    <div class="log-entry">üé´ Coach Selected: ${coach}</div>
                    <div class="log-entry">üìç Event Target: ${event.target.textContent}</div>
                    <div class="log-entry">üéØ Current Target: Train Container (parent)</div>
                    <div class="log-entry">‚ú® This is EVENT DELEGATION - one listener handles all coaches!</div>
                `;
            }
        });
    </script>
</body>
</html>