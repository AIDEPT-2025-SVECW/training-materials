<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>JS Control Structures - Interactive Demo</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        padding: 20px;
        line-height: 1.6;
      }
      .container {
        max-width: 1200px;
        margin: 0 auto;
        background: white;
        border-radius: 15px;
        padding: 30px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      }
      h1 {
        text-align: center;
        color: #667eea;
        margin-bottom: 10px;
        font-size: 2.5em;
      }
      .subtitle {
        text-align: center;
        color: #666;
        margin-bottom: 30px;
        font-style: italic;
      }
      .section {
        margin: 30px 0;
        padding: 25px;
        background: #f8f9fa;
        border-radius: 10px;
        border-left: 5px solid #667eea;
      }
      .section h2 {
        color: #667eea;
        margin-bottom: 15px;
        font-size: 1.8em;
      }
      .concept {
        background: #e3f2fd;
        padding: 15px;
        border-radius: 8px;
        margin: 15px 0;
        border-left: 4px solid #2196f3;
      }
      .analogy {
        background: #fff3cd;
        padding: 15px;
        border-radius: 8px;
        margin: 15px 0;
        border-left: 4px solid #ffc107;
      }
      .analogy::before {
        content: "üí° Analogy: ";
        font-weight: bold;
        color: #ff9800;
      }
      .demo-box {
        background: white;
        padding: 20px;
        border-radius: 8px;
        margin: 15px 0;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }
      pre {
        background: #2d2d2d;
        color: #f8f8f2;
        padding: 20px;
        border-radius: 8px;
        overflow-x: auto;
        margin: 15px 0;
        font-size: 14px;
        line-height: 1.5;
      }
      code {
        font-family: "Courier New", monospace;
      }
      button {
        background: #667eea;
        color: white;
        border: none;
        padding: 12px 25px;
        border-radius: 6px;
        cursor: pointer;
        font-size: 16px;
        margin: 5px;
        transition: all 0.3s;
      }
      button:hover {
        background: #5568d3;
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
      }
      input,
      select {
        padding: 10px;
        border: 2px solid #ddd;
        border-radius: 6px;
        font-size: 16px;
        margin: 5px;
        width: 200px;
      }
      input:focus,
      select:focus {
        outline: none;
        border-color: #667eea;
      }
      .output {
        background: #e8f5e9;
        padding: 15px;
        border-radius: 6px;
        margin-top: 15px;
        min-height: 50px;
        border-left: 4px solid #4caf50;
      }
      .comparison-table {
        width: 100%;
        border-collapse: collapse;
        margin: 15px 0;
      }
      .comparison-table th,
      .comparison-table td {
        padding: 12px;
        text-align: left;
        border: 1px solid #ddd;
      }
      .comparison-table th {
        background: #667eea;
        color: white;
      }
      .comparison-table tr:nth-child(even) {
        background: #f8f9fa;
      }
      .highlight {
        background: #ffeb3b;
        padding: 2px 5px;
        border-radius: 3px;
      }
      .grid-demo {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
        gap: 10px;
        margin: 15px 0;
      }
      .grid-item {
        background: #667eea;
        color: white;
        padding: 20px;
        border-radius: 6px;
        text-align: center;
        transition: transform 0.3s;
      }
      .grid-item:hover {
        transform: scale(1.05);
      }
      .visual-flow {
        display: flex;
        align-items: center;
        gap: 10px;
        flex-wrap: wrap;
        margin: 15px 0;
      }
      .flow-box {
        background: #667eea;
        color: white;
        padding: 15px 20px;
        border-radius: 6px;
        font-weight: bold;
      }
      .arrow {
        font-size: 24px;
        color: #667eea;
      }
    </style>
  </head>
  <body>
    <!-- GitHub Reference Section -->
    <div class="concept" style="margin: 25px auto; max-width: 900px">
      <strong>üìÇ Student Reference (GitHub)</strong>
      <p style="margin-top: 8px">
        Explore the complete source code, experiments, and practice demos
        related to this topic here:
      </p>
      <p style="margin-top: 5px">
        üëâ
        <a
          href="https://github.com/AIDEPT-2025-SVECW/JS-Demo/tree/master/syntax-datatypes-loops"
          target="_blank"
          style="color: #667eea; font-weight: bold"
        >
          View on GitHub
        </a>
      </p>
    </div>

    <div class="container">
      <h1>üéÆ JavaScript Control Structures</h1>
      <p class="subtitle">
        Master the art of controlling program flow like a traffic controller
        manages city roads
      </p>

      <!-- IF-ELSE Section -->
      <div class="section">
        <h2>1. if-else: The Decision Maker</h2>
        <div class="concept">
          <strong>Concept:</strong> Executes code based on boolean conditions -
          your program's decision-making brain.
        </div>
        <div class="analogy">
          Think of if-else like a <strong>railway signal system</strong>.
        </div>

        <div class="demo-box">
          <h3>üéØ Demo: Ticket Pricing System</h3>
          <p>
            Enter your age to see ticket price calculation with nested
            conditions:
          </p>
          <input
            type="number"
            id="age-input"
            placeholder="Enter age"
            value="25"
          />
          <button id="ticket-btn">Calculate Ticket Price</button>
          <div class="output" id="ticket-output"></div>
        </div>

        <pre><code>// Indian Cinema Ticket Pricing (display only)</code></pre>
      </div>

      <!-- SWITCH Section -->
      <div class="section">
        <h2>2. switch: The Exact Match Specialist</h2>
        <div class="demo-box">
          <h3>üöó Demo: Vehicle Type Identifier</h3>
          <select id="vehicle-code">
            <option value="2W">2W - Two Wheeler</option>
            <option value="3W">3W - Auto Rickshaw</option>
            <option value="4W">4W - Car</option>
            <option value="HV">HV - Heavy Vehicle</option>
            <option value="EV">EV - Electric Vehicle</option>
            <option value="XX">XX - Invalid Code</option>
          </select>
          <button id="vehicle-btn">Identify Vehicle</button>
          <div class="output" id="vehicle-output"></div>
        </div>

        <div class="demo-box">
          <h3>‚ö†Ô∏è The Fall-Through Feature</h3>
          <button id="fallthrough-btn">See Fall-Through Magic</button>
          <div class="output" id="fallthrough-output"></div>
        </div>
      </div>

      <!-- FOR LOOP Section -->
      <div class="section">
        <h2>3. for Loop: The Counter-Based Warrior</h2>
        <div class="demo-box">
          <h3>üìä Demo: Pattern Generator</h3>
          <label
            >Number of rows:
            <input type="number" id="rows-input" value="5" min="1" max="10"
          /></label>
          <button id="inc-pattern">Increasing Triangle</button>
          <button id="dec-pattern">Decreasing Triangle</button>
          <button id="pyr-pattern">Pyramid</button>
          <div
            class="output"
            id="pattern-output"
            style="font-family: monospace; white-space: pre"
          ></div>
        </div>

        <div class="demo-box">
          <h3>üéØ Real-World: Array Processing with for</h3>
          <button id="marks-btn">Calculate Class Results</button>
          <div class="output" id="marks-output"></div>
        </div>
      </div>

      <!-- WHILE LOOP Section -->
      <div class="section">
        <h2>4. while Loop: The Condition-Driven Fighter</h2>
        <div class="demo-box">
          <h3>üé≤ Demo: Number Guessing Game</h3>
          <p>I'm thinking of a number between 1-100. Try to guess it!</p>
          <input
            type="number"
            id="guess-input"
            min="1"
            max="100"
            placeholder="Your guess"
          />
          <button id="start-guess">Start New Game</button>
          <button id="submit-guess">Submit Guess</button>
          <div class="output" id="guess-output"></div>
        </div>

        <div class="demo-box">
          <h3>‚ö° while vs do-while: The Critical Difference</h3>
          <button id="while-vs-do">See the Difference</button>
          <div class="output" id="while-comparison"></div>
        </div>
      </div>

      <!-- FOREACH Section -->
      <div class="section">
        <h2>5. forEach: The Modern Array Iterator</h2>
        <div class="demo-box">
          <h3>üõí Demo: Shopping Cart Calculator</h3>
          <button id="cart-btn">Process Cart Items</button>
          <div class="output" id="cart-output"></div>
        </div>

        <div class="demo-box">
          <h3>üî• Loop Comparison: Which One to Use?</h3>
          <button id="loop-compare-btn">Run Performance Comparison</button>
          <div class="output" id="loop-comparison"></div>
        </div>
      </div>

      <!-- Advanced Concepts Section -->
      <div class="section">
        <h2>6. üöÄ Advanced Control Flow Patterns</h2>
        <div class="demo-box">
          <h3>üéØ Real-World Challenge: Student Report Generator</h3>
          <button id="generate-report">Generate Complete Report</button>
          <div class="output" id="report-output"></div>
        </div>

        <div class="demo-box">
          <h3>üéÆ Interactive Challenge: Build a Menu System</h3>
          <p>Try all control structures in one interactive demo:</p>
          <select id="menu-choice">
            <option value="">-- Select Operation --</option>
            <option value="factorial">Calculate Factorial</option>
            <option value="fibonacci">Generate Fibonacci</option>
            <option value="prime">Check Prime Numbers</option>
            <option value="palindrome">Check Palindrome</option>
          </select>
          <input
            type="number"
            id="menu-input"
            placeholder="Enter number"
            value="7"
          />
          <button id="execute-menu">Execute</button>
          <div class="output" id="menu-output"></div>
        </div>
      </div>

      <!-- Loop Control Keywords Section -->
      <div class="section">
        <h2>7. üéØ Loop Control Keywords: break & continue</h2>
        <div class="demo-box">
          <h3>üîç Demo: Search with break</h3>
          <p>Find a student in the database (demonstrates early exit):</p>
          <input
            type="text"
            id="search-name"
            placeholder="Enter student name"
            value="Priya"
          />
          <button id="search-btn">Search</button>
          <div class="output" id="search-output"></div>
        </div>

        <div class="demo-box">
          <h3>‚è≠Ô∏è Demo: Filter with continue</h3>
          <p>Process only even numbers (demonstrates skipping iterations):</p>
          <button id="even-btn">Process Even Numbers Only</button>
          <div class="output" id="continue-output"></div>
        </div>

        <div class="demo-box">
          <h3>üéØ Nested Loops: break vs continue behavior</h3>
          <button id="nested-btn">See Nested Loop Control</button>
          <div class="output" id="nested-output"></div>
        </div>
      </div>

      <!-- Performance & Best Practices -->
      <div class="section">
        <h2>8. ‚ö° Performance Tips & Common Pitfalls</h2>
        <div class="demo-box">
          <h3>‚ùå Common Mistakes to Avoid</h3>
          <button id="mistakes-btn">Show Common Pitfalls</button>
          <div class="output" id="mistakes-output"></div>
        </div>

        <div class="demo-box">
          <h3>üöÄ Performance Comparison</h3>
          <button id="perf-btn">Run Performance Tests</button>
          <div class="output" id="performance-output"></div>
        </div>
      </div>

      <!-- Final Summary -->
      <div class="section">
        <h2>9. üìö Quick Reference Cheat Sheet</h2>
        <div class="demo-box">
          <h3>üéÆ Final Interactive Challenge</h3>
          <button id="start-quiz">Start Quiz</button>
          <div class="output" id="quiz-output"></div>
        </div>
      </div>

      <div
        style="
          text-align: center;
          margin-top: 40px;
          padding: 20px;
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          color: white;
          border-radius: 10px;
        "
      >
        <h2>üéì Remember: Control structures are your program's GPS!</h2>
        <p style="font-size: 1.1em; margin: 10px 0">
          if-else = Decision points at crossroads<br />
          switch = Direct highway exits<br />
          for = Counted journeys<br />
          while = Destination-based travel<br />
          forEach = Guided tour of array cities
        </p>
        <p style="margin-top: 20px; font-style: italic">
          "Good code is like a well-planned journey - every turn has a purpose!"
          üöÄ
        </p>
      </div>
    </div>

    <!-- Real interactive scripts (functions must be defined here so buttons can call them) -->
    <script>
      /***** Ticket Pricing - if/else demo *****/
      function calculateTicket() {
        const age = parseInt(document.getElementById("age-input").value);
        let price, category;

        if (Number.isNaN(age)) {
          category = "Invalid age";
          price = 0;
        } else if (age < 0 || age > 120) {
          category = "Invalid age";
          price = 0;
        } else if (age <= 5) {
          category = "Toddler";
          price = 0; // Free
        } else if (age <= 12) {
          category = "Child";
          price = 100;
        } else if (age <= 17) {
          category = "Teen";
          price = 150;
        } else if (age <= 59) {
          category = "Adult";
          price = 250;
        } else {
          category = "Senior Citizen";
          price = 150;
        }

        const output = `Category: ${category} | Price: ‚Çπ${price}`;
        document.getElementById("ticket-output").innerHTML = output;
      }

      /***** switch demo: vehicle identifier *****/
      function identifyVehicle() {
        const code = document.getElementById("vehicle-code").value;
        let vehicle, toll;

        switch (code) {
          case "2W":
            vehicle = "Two Wheeler (Bike/Scooter)";
            toll = "‚Çπ50";
            break;
          case "3W":
            vehicle = "Three Wheeler (Auto Rickshaw)";
            toll = "‚Çπ60";
            break;
          case "4W":
            vehicle = "Four Wheeler (Car)";
            toll = "‚Çπ100";
            break;
          case "HV":
            vehicle = "Heavy Vehicle (Truck/Bus)";
            toll = "‚Çπ200";
            break;
          case "EV":
            vehicle = "Electric Vehicle (Any Type)";
            toll = "‚Çπ25 (50% discount)";
            break;
          default:
            vehicle = "Unknown Vehicle Type";
            toll = "Please contact toll booth";
        }

        document.getElementById("vehicle-output").innerHTML =
          `<strong>${vehicle}</strong><br>Toll Fee: ${toll}`;
      }

      function demonstrateFallThrough() {
        const days = ["Monday", "Saturday", "Sunday", "Wednesday"];
        let results = [];

        days.forEach((day) => {
          let message;
          switch (day) {
            case "Saturday":
            case "Sunday":
              message = `${day} is <span class="highlight">WEEKEND</span> - Enjoy!`;
              break;
            case "Monday":
            case "Tuesday":
            case "Wednesday":
            case "Thursday":
            case "Friday":
              message = `${day} is weekday - Time to work!`;
              break;
            default:
              message = `${day}? Invalid day!`;
          }
          results.push(message);
        });

        document.getElementById("fallthrough-output").innerHTML =
          results.join("<br>");
      }

      /***** Pattern generator (for loops) *****/
      function generatePattern(type) {
        const rows = parseInt(document.getElementById("rows-input").value) || 5;
        let pattern = "";

        if (type === "increasing") {
          for (let i = 1; i <= rows; i++) {
            for (let j = 1; j <= i; j++) {
              pattern += "‚≠ê ";
            }
            pattern += "\n";
          }
        } else if (type === "decreasing") {
          for (let i = rows; i >= 1; i--) {
            for (let j = 1; j <= i; j++) {
              pattern += "üî∑ ";
            }
            pattern += "\n";
          }
        } else if (type === "pyramid") {
          for (let i = 1; i <= rows; i++) {
            for (let j = 1; j <= rows - i; j++) {
              pattern += "  ";
            }
            for (let k = 1; k <= 2 * i - 1; k++) {
              pattern += "üåü ";
            }
            pattern += "\n";
          }
        }

        document.getElementById("pattern-output").textContent = pattern;
      }

      function processMarks() {
        const students = [
          { name: "Aarav", marks: 85 },
          { name: "Priya", marks: 92 },
          { name: "Rahul", marks: 78 },
          { name: "Sneha", marks: 95 },
          { name: "Vivek", marks: 67 },
        ];

        let total = 0;
        let highest = students[0];
        let lowest = students[0];

        for (let i = 0; i < students.length; i++) {
          total += students[i].marks;
          if (students[i].marks > highest.marks) highest = students[i];
          if (students[i].marks < lowest.marks) lowest = students[i];
        }

        const average = (total / students.length).toFixed(2);
        document.getElementById("marks-output").innerHTML = `
            <strong>Class Statistics:</strong><br>
            Average Score: ${average}%<br>
            Top Performer: ${highest.name} (${highest.marks}%)<br>
            Needs Support: ${lowest.name} (${lowest.marks}%)
        `;
      }

      /***** Guessing game (while) *****/
      let targetNumber,
        attempts,
        gameActive = false;
      function startGuessing() {
        targetNumber = Math.floor(Math.random() * 100) + 1;
        attempts = 0;
        gameActive = true;
        document.getElementById("guess-output").innerHTML =
          "Game started! Make your first guess...";
      }
      function makeGuess() {
        if (!gameActive) {
          document.getElementById("guess-output").innerHTML =
            "Please start a new game first!";
          return;
        }
        const guess = parseInt(document.getElementById("guess-input").value);
        attempts++;
        if (Number.isNaN(guess)) {
          document.getElementById("guess-output").innerHTML =
            "Enter a valid number!";
          return;
        }
        if (guess < targetNumber) {
          document.getElementById("guess-output").innerHTML =
            `Attempt ${attempts}: Too low! Try higher...`;
        } else if (guess > targetNumber) {
          document.getElementById("guess-output").innerHTML =
            `Attempt ${attempts}: Too high! Try lower...`;
        } else {
          document.getElementById("guess-output").innerHTML =
            `üéâ Correct! You guessed ${targetNumber} in ${attempts} attempts!`;
          gameActive = false;
        }
      }
      function demonstrateWhileVsDoWhile() {
        let result =
          "<strong>Scenario: Starting with false condition</strong><br><br>";
        let whileCount = 0;
        let condition = false;
        result += "üîç while loop (condition checked BEFORE):<br>";
        while (condition) {
          whileCount++;
          result += `This never prints because condition is false!<br>`;
        }
        result += `Executed ${whileCount} times<br><br>`;
        let doWhileCount = 0;
        result += "üîç do-while loop (condition checked AFTER):<br>";
        do {
          doWhileCount++;
          result += `This prints once even though condition is false!<br>`;
        } while (condition);
        result += `Executed ${doWhileCount} time(s)<br>`;
        document.getElementById("while-comparison").innerHTML = result;
      }

      /***** Cart & loop comparisons *****/
      function calculateCart() {
        const cartItems = [
          { name: "Parle-G Biscuits", price: 10, quantity: 5 },
          { name: "Tata Tea", price: 145, quantity: 2 },
          { name: "Amul Butter", price: 56, quantity: 3 },
          { name: "Maggi Noodles", price: 12, quantity: 10 },
          { name: "Surf Excel", price: 250, quantity: 1 },
        ];
        let total = 0;
        let itemsList = "<strong>Cart Items:</strong><br>";
        cartItems.forEach((item, index) => {
          const itemTotal = item.price * item.quantity;
          total += itemTotal;
          itemsList += `${index + 1}. ${item.name}: ‚Çπ${item.price} √ó ${item.quantity} = ‚Çπ${itemTotal}<br>`;
        });
        itemsList += `<br><strong>Total Amount: ‚Çπ${total}</strong>`;
        if (total > 500) {
          const discount = total * 0.1;
          const final = total - discount;
          itemsList += `<br>üéâ Discount (10%): -‚Çπ${discount.toFixed(2)}`;
          itemsList += `<br><strong>Final Amount: ‚Çπ${final.toFixed(2)}</strong>`;
        }
        document.getElementById("cart-output").innerHTML = itemsList;
      }

      function compareLoops() {
        const numbers = Array.from({ length: 1000 }, (_, i) => i + 1);
        let results = "<strong>Processing 1000 numbers:</strong><br><br>";
        let t1 = performance.now();
        let sum1 = 0;
        for (let i = 0; i < numbers.length; i++) sum1 += numbers[i];
        let time1 = performance.now() - t1;

        let t2 = performance.now();
        let sum2 = 0;
        numbers.forEach((num) => (sum2 += num));
        let time2 = performance.now() - t2;

        let t3 = performance.now();
        let sum3 = 0;
        let i = 0;
        while (i < numbers.length) {
          sum3 += numbers[i];
          i++;
        }
        let time3 = performance.now() - t3;

        results += `‚úÖ for loop: ${time1.toFixed(3)}ms<br>`;
        results += `‚úÖ forEach: ${time2.toFixed(3)}ms<br>`;
        results += `‚úÖ while: ${time3.toFixed(3)}ms<br>`;
        document.getElementById("loop-comparison").innerHTML = results;
      }

      /***** Advanced: report, menu, quiz, search, nested examples *****/
      function generateReport() {
        const students = [
          { name: "Amit", marks: [78, 85, 92, 88, 76] },
          { name: "Priya", marks: [95, 98, 94, 97, 99] },
          { name: "Rahul", marks: [45, 52, 48, 50, 55] },
          { name: "Sneha", marks: [88, 91, 85, 89, 92] },
          { name: "Vikram", marks: [62, 68, 71, 65, 69] },
        ];
        let report = '<div style="font-family: monospace;">';
        report += "<strong>üìã COMPREHENSIVE STUDENT REPORT</strong><br>";
        report += "‚ïê".repeat(50) + "<br><br>";
        students.forEach((student, index) => {
          report += `Student ${index + 1}: ${student.name}<br>`;
          let total = 0;
          for (let i = 0; i < student.marks.length; i++)
            total += student.marks[i];
          const average = total / student.marks.length;
          let grade, remark;
          if (average >= 90) {
            grade = "A+";
            remark = "Outstanding! üåü";
          } else if (average >= 80) {
            grade = "A";
            remark = "Excellent! üëè";
          } else if (average >= 70) {
            grade = "B";
            remark = "Good work! üëç";
          } else if (average >= 60) {
            grade = "C";
            remark = "Average, needs improvement üìö";
          } else if (average >= 50) {
            grade = "D";
            remark = "Below average, focus needed ‚ö†Ô∏è";
          } else {
            grade = "F";
            remark = "Failing, immediate attention! üö®";
          }
          report += `Average: ${average.toFixed(2)}% | Grade: ${grade}<br>`;
          report += `Remark: ${remark}<br>`;
          let status;
          switch (grade) {
            case "A+":
            case "A":
              status = "PROMOTED with Honors";
              break;
            case "B":
            case "C":
              status = "PROMOTED";
              break;
            case "D":
              status = "PROMOTED (Conditional)";
              break;
            default:
              status = "NOT PROMOTED";
          }
          report += `Status: ${status}<br>`;
          report += "‚îÄ".repeat(50) + "<br>";
        });
        report += "</div>";
        document.getElementById("report-output").innerHTML = report;
      }

      function executeMenuChoice() {
        const choice = document.getElementById("menu-choice").value;
        const input = parseInt(document.getElementById("menu-input").value);
        let result = "";
        switch (choice) {
          case "factorial":
            if (input < 0)
              result = "Factorial not defined for negative numbers!";
            else {
              let fact = 1;
              let n = input;
              while (n > 1) {
                fact *= n;
                n--;
              }
              result = `Factorial of ${input} = ${fact}`;
            }
            break;
          case "fibonacci":
            result = `First ${input} Fibonacci numbers:<br>`;
            let fib = [0, 1];
            for (let i = 2; i < input; i++) fib[i] = fib[i - 1] + fib[i - 2];
            result += fib.slice(0, input).join(", ");
            break;
          case "prime":
            result = `Prime numbers up to ${input}:<br>`;
            let primes = [];
            for (let num = 2; num <= input; num++) {
              let isPrime = true;
              for (let i = 2; i <= Math.sqrt(num); i++) {
                if (num % i === 0) {
                  isPrime = false;
                  break;
                }
              }
              if (isPrime) primes.push(num);
            }
            result += primes.join(", ");
            result += `<br>Total: ${primes.length} prime numbers`;
            break;
          case "palindrome":
            let original = input.toString();
            let reversed = "";
            let i = original.length - 1;
            while (i >= 0) {
              reversed += original[i];
              i--;
            }
            if (original === reversed)
              result = `${input} is a PALINDROME! üéâ<br>Forward: ${original}<br>Backward: ${reversed}`;
            else
              result = `${input} is NOT a palindrome.<br>Forward: ${original}<br>Backward: ${reversed}`;
            break;
          default:
            result = "Please select an operation from the menu!";
        }
        document.getElementById("menu-output").innerHTML = result;
      }

      /***** break / continue / nested examples *****/
      function searchStudent() {
        const students = [
          { id: 101, name: "Amit", class: "10A" },
          { id: 102, name: "Priya", class: "10B" },
          { id: 103, name: "Rahul", class: "10A" },
          { id: 104, name: "Sneha", class: "10C" },
          { id: 105, name: "Vikram", class: "10B" },
        ];
        const searchName = document.getElementById("search-name").value;
        let found = false;
        let checks = 0;
        for (let i = 0; i < students.length; i++) {
          checks++;
          if (students[i].name === searchName) {
            found = true;
            document.getElementById("search-output").innerHTML = `
                    ‚úÖ Found in ${checks} checks!<br>
                    <strong>Student Details:</strong><br>
                    ID: ${students[i].id}<br>
                    Name: ${students[i].name}<br>
                    Class: ${students[i].class}<br>
                    <em>break statement saved ${students.length - checks} unnecessary checks!</em>
                `;
            break;
          }
        }
        if (!found) {
          document.getElementById("search-output").innerHTML =
            `‚ùå Student "${searchName}" not found after checking all ${checks} records.`;
        }
      }

      function processEvenNumbers() {
        const numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
        let processed = [];
        let skipped = [];
        for (let i = 0; i < numbers.length; i++) {
          if (numbers[i] % 2 !== 0) {
            skipped.push(numbers[i]);
            continue;
          }
          processed.push(numbers[i] * 2);
        }
        document.getElementById("continue-output").innerHTML = `
            <strong>Original:</strong> ${numbers.join(", ")}<br>
            <strong>Skipped (odd):</strong> ${skipped.join(", ")}<br>
            <strong>Processed (even √ó 2):</strong> ${processed.join(", ")}<br>
            <em>continue allowed us to skip ${skipped.length} iterations cleanly!</em>
        `;
      }

      function demonstrateNestedControl() {
        let result = "<strong>Nested Loop Behavior:</strong><br><br>";
        result += "1Ô∏è‚É£ Using break in inner loop:<br>";
        for (let i = 1; i <= 3; i++) {
          result += `Outer loop i=${i}: `;
          for (let j = 1; j <= 5; j++) {
            if (j === 3) {
              result += "[BREAK] ";
              break;
            }
            result += `j=${j} `;
          }
          result += "<br>";
        }
        result += "<br>2Ô∏è‚É£ Using continue in inner loop:<br>";
        for (let i = 1; i <= 3; i++) {
          result += `Outer loop i=${i}: `;
          for (let j = 1; j <= 5; j++) {
            if (j === 3) {
              result += "[SKIP] ";
              continue;
            }
            result += `j=${j} `;
          }
          result += "<br>";
        }
        result += "<br>3Ô∏è‚É£ Real use case - Find first duplicate:<br>";
        const matrix = [
          [1, 2, 3],
          [4, 5, 6],
          [7, 5, 9],
        ];
        let foundDuplicate = false;
        outerLoop: for (let i = 0; i < matrix.length; i++) {
          for (let j = i + 1; j < matrix.length; j++) {
            for (let k = 0; k < matrix[i].length; k++) {
              if (matrix[i].includes(matrix[j][k])) {
                result += `Found duplicate: ${matrix[j][k]} in rows ${i} and ${j}`;
                foundDuplicate = true;
                break outerLoop;
              }
            }
          }
        }
        document.getElementById("nested-output").innerHTML = result;
      }

      /***** mistakes, performance, quiz helpers *****/
      function showCommonMistakes() {
        let output = '<div style="font-family: monospace;">';
        output += "<strong>‚ùå MISTAKE 1: Infinite Loop</strong><br>";
        output += "BAD: while (true) { } // Never ends!<br>";
        output += "GOOD: while (count < 10) { count++; }<br><br>";
        output +=
          "<strong>‚ùå MISTAKE 2: Modifying array during forEach</strong><br>";
        output +=
          "BAD: arr.forEach(item => arr.push(item*2)) // Creates infinite items!<br>";
        output += "GOOD: Use map() or for loop for modifications<br><br>";
        const day = "Monday";
        let msg1 = "",
          msg2 = "";
        switch (day) {
          case "Monday":
            msg1 += "Mon ";
          case "Tuesday":
            msg1 += "Tue ";
          case "Wednesday":
            msg1 += "Wed ";
        }
        switch (day) {
          case "Monday":
            msg2 = "Mon";
            break;
          case "Tuesday":
            msg2 = "Tue";
            break;
          case "Wednesday":
            msg2 = "Wed";
            break;
        }
        output += `Without break: "${msg1}" (Fall-through!)<br>`;
        output += `With break: "${msg2}" (Correct!)<br><br>`;
        output +=
          "<strong>‚ùå MISTAKE 4: Using forEach when you need break/return</strong><br>";
        output +=
          "BAD: arr.forEach(item => { if(item > 5) break; }) // ERROR!<br>";
        output += "GOOD: Use for...of or traditional for loop instead<br><br>";
        output +=
          "<strong>‚ùå MISTAKE 5: Expensive operations in loop condition</strong><br>";
        output +=
          "BAD: for(let i=0; i < array.length; i++) // Checks length every time!<br>";
        output += "GOOD: for(let i=0, len=array.length; i < len; i++)<br>";
        output += "</div>";
        document.getElementById("mistakes-output").innerHTML = output;
      }

      function runPerformanceTests() {
        const testSize = 10000;
        const testArray = Array.from({ length: testSize }, (_, i) => i);
        let results =
          "<strong>Performance Test (10,000 iterations):</strong><br><br>";
        let start = performance.now();
        let sum1 = 0;
        for (let i = 0, len = testArray.length; i < len; i++)
          sum1 += testArray[i];
        let time1 = performance.now() - start;
        start = performance.now();
        let sum2 = 0;
        for (let i = 0; i < testArray.length; i++) sum2 += testArray[i];
        let time2 = performance.now() - start;
        start = performance.now();
        let sum3 = 0;
        testArray.forEach((n) => (sum3 += n));
        let time3 = performance.now() - start;
        start = performance.now();
        let sum4 = 0;
        for (const n of testArray) sum4 += n;
        let time4 = performance.now() - start;
        results += `1. for (cached length): ${time1.toFixed(3)}ms ‚ö°<br>`;
        results += `2. for (uncached): ${time2.toFixed(3)}ms<br>`;
        results += `3. forEach: ${time3.toFixed(3)}ms<br>`;
        results += `4. for...of: ${time4.toFixed(3)}ms<br><br>`;
        results += "<strong>üí° Key Takeaways:</strong><br>";
        results += "‚Ä¢ Caching length improves performance<br>";
        results += "‚Ä¢ forEach is slower but more readable<br>";
        results += "‚Ä¢ Choose readability over micro-optimizations<br>";
        document.getElementById("performance-output").innerHTML = results;
      }

      /***** quiz *****/
      let quizScore = 0,
        quizQuestion = 0;
      const quizData = [
        {
          q: "Which loop checks condition AFTER first execution?",
          options: ["for", "while", "do-while", "forEach"],
          correct: 2,
        },
        {
          q: "Which is fastest for exact value matching?",
          options: ["if-else", "switch", "ternary", "All same"],
          correct: 1,
        },
        {
          q: "Which loop CANNOT use break statement?",
          options: ["for", "while", "forEach", "do-while"],
          correct: 2,
        },
      ];
      function startQuiz() {
        quizScore = 0;
        quizQuestion = 0;
        showQuestion();
      }
      function showQuestion() {
        if (quizQuestion >= quizData.length) {
          document.getElementById("quiz-output").innerHTML =
            `üéâ Quiz Complete!<br>Your Score: ${quizScore}/${quizData.length}<br>${quizScore === quizData.length ? "Perfect! You are a master! üèÜ" : quizScore >= 2 ? "Good job! Keep learning! üëç" : "Keep practicing! Review the concepts above. üìö"}`;
          return;
        }
        const q = quizData[quizQuestion];
        let html = `<strong>Question ${quizQuestion + 1}:</strong> ${q.q}<br><br>`;
        q.options.forEach(
          (opt, idx) =>
            (html += `<button onclick="checkAnswer(${idx})">${opt}</button>`),
        );
        document.getElementById("quiz-output").innerHTML = html;
      }
      function checkAnswer(selected) {
        const correct = quizData[quizQuestion].correct;
        if (selected === correct) {
          quizScore++;
          document.getElementById("quiz-output").innerHTML =
            '‚úÖ Correct!<br><button onclick="nextQuestion()">Next Question</button>';
        } else {
          document.getElementById("quiz-output").innerHTML =
            "‚ùå Wrong! Correct answer: " +
            quizData[quizQuestion].options[correct] +
            '<br><button onclick="nextQuestion()">Next Question</button>';
        }
      }
      function nextQuestion() {
        quizQuestion++;
        showQuestion();
      }

      /***** attach event listeners to avoid inline onclick and ensure functions exist *****/
      document
        .getElementById("ticket-btn")
        .addEventListener("click", calculateTicket);
      document
        .getElementById("vehicle-btn")
        .addEventListener("click", identifyVehicle);
      document
        .getElementById("fallthrough-btn")
        .addEventListener("click", demonstrateFallThrough);
      document
        .getElementById("inc-pattern")
        .addEventListener("click", () => generatePattern("increasing"));
      document
        .getElementById("dec-pattern")
        .addEventListener("click", () => generatePattern("decreasing"));
      document
        .getElementById("pyr-pattern")
        .addEventListener("click", () => generatePattern("pyramid"));
      document
        .getElementById("marks-btn")
        .addEventListener("click", processMarks);
      document
        .getElementById("start-guess")
        .addEventListener("click", startGuessing);
      document
        .getElementById("submit-guess")
        .addEventListener("click", makeGuess);
      document
        .getElementById("while-vs-do")
        .addEventListener("click", demonstrateWhileVsDoWhile);
      document
        .getElementById("cart-btn")
        .addEventListener("click", calculateCart);
      document
        .getElementById("loop-compare-btn")
        .addEventListener("click", compareLoops);
      document
        .getElementById("generate-report")
        .addEventListener("click", generateReport);
      document
        .getElementById("execute-menu")
        .addEventListener("click", executeMenuChoice);
      document
        .getElementById("search-btn")
        .addEventListener("click", searchStudent);
      document
        .getElementById("even-btn")
        .addEventListener("click", processEvenNumbers);
      document
        .getElementById("nested-btn")
        .addEventListener("click", demonstrateNestedControl);
      document
        .getElementById("mistakes-btn")
        .addEventListener("click", showCommonMistakes);
      document
        .getElementById("perf-btn")
        .addEventListener("click", runPerformanceTests);
      document
        .getElementById("start-quiz")
        .addEventListener("click", startQuiz);
    </script>
  </body>
</html>
