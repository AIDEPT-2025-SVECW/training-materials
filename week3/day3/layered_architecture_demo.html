<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Layered Architecture Demo</title>
    <link rel="stylesheet" href="layered_architecture_styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Web Application Layered Architecture</h1>
            <p>Interactive demonstration of Controller, Service, and Repository layers</p>
        </header>

        <div class="architecture-overview">
            <h2>Why Layered Architecture?</h2>
            <div class="benefits-grid">
                <div class="benefit-card">
                    <h3>üîß Separation of Concerns</h3>
                    <p>Each layer has a specific responsibility, making code easier to maintain and understand.</p>
                </div>
                <div class="benefit-card">
                    <h3>üîÑ Reusability</h3>
                    <p>Services can be reused across different controllers, repositories across services.</p>
                </div>
                <div class="benefit-card">
                    <h3>üß™ Testability</h3>
                    <p>Each layer can be tested independently with mocked dependencies.</p>
                </div>
                <div class="benefit-card">
                    <h3>üìà Scalability</h3>
                    <p>Easy to modify or replace individual layers without affecting others.</p>
                </div>
            </div>
        </div>

        <div class="demo-section">
            <h2>Interactive Demo - User Management System</h2>
            <div class="demo-controls">
                <input type="text" id="userName" placeholder="Enter user name">
                <input type="email" id="userEmail" placeholder="Enter user email">
                <button onclick="createUser()">Create User</button>
                <button onclick="getAllUsers()">Get All Users</button>
                <button onclick="clearLogs()">Clear Logs</button>
            </div>
        </div>

        <div class="demo-section">
            <img src="layered_architecture_flow.gif" width="100%" height="100%"/>
            <a href="https://medium.com/@dulanjayasandaruwan1998/understanding-spring-boot-architecture-flow-615d209b95f9" target="_blank">Reference & Credits to Author</a>
        </div>

        <div class="layers-container">
            <!-- Controller Layer -->
            <div class="layer controller-layer">
                <div class="layer-header">
                    <h3>üéÆ Controller Layer</h3>
                    <span class="annotation">@RestController</span>
                </div>
                <div class="layer-content">
                    <div class="responsibilities">
                        <h4>Responsibilities:</h4>
                        <ul>
                            <li>Handle HTTP requests/responses</li>
                            <li>Request validation</li>
                            <li>Call appropriate services</li>
                            <li>Return formatted responses</li>
                        </ul>
                    </div>
                    <div class="annotations-info">
                        <h4>Key Annotations:</h4>
                        <div class="annotation-item">
                            <code>@RestController</code>
                            <p>Combines @Controller + @ResponseBody</p>
                        </div>
                        <div class="annotation-item">
                            <code>@RequestMapping</code>
                            <p>Maps HTTP requests to handler methods</p>
                        </div>
                        <div class="annotation-item">
                            <code>@Autowired</code>
                            <p>Injects service dependencies</p>
                        </div>
                    </div>
                    <div class="activity-log" id="controllerLog">
                        <h4>Controller Activity:</h4>
                        <div class="log-content"></div>
                    </div>
                </div>
            </div>

            <!-- Service Layer -->
            <div class="layer service-layer">
                <div class="layer-header">
                    <h3>‚öôÔ∏è Service Layer</h3>
                    <span class="annotation">@Service</span>
                </div>
                <div class="layer-content">
                    <div class="responsibilities">
                        <h4>Responsibilities:</h4>
                        <ul>
                            <li>Business logic implementation</li>
                            <li>Transaction management</li>
                            <li>Data validation</li>
                            <li>Coordinate between layers</li>
                        </ul>
                    </div>
                    <div class="annotations-info">
                        <h4>Key Annotations:</h4>
                        <div class="annotation-item">
                            <code>@Service</code>
                            <p>Specialized @Component for service layer</p>
                        </div>
                        <div class="annotation-item">
                            <code>@Transactional</code>
                            <p>Manages database transactions</p>
                        </div>
                        <div class="annotation-item">
                            <code>@Autowired</code>
                            <p>Injects repository dependencies</p>
                        </div>
                    </div>
                    <div class="activity-log" id="serviceLog">
                        <h4>Service Activity:</h4>
                        <div class="log-content"></div>
                    </div>
                </div>
            </div>

            <!-- Repository Layer -->
            <div class="layer repository-layer">
                <div class="layer-header">
                    <h3>üóÑÔ∏è Repository Layer</h3>
                    <span class="annotation">@Repository</span>
                </div>
                <div class="layer-content">
                    <div class="responsibilities">
                        <h4>Responsibilities:</h4>
                        <ul>
                            <li>Data access operations</li>
                            <li>Database queries</li>
                            <li>Data persistence</li>
                            <li>Exception translation</li>
                        </ul>
                    </div>
                    <div class="annotations-info">
                        <h4>Key Annotations:</h4>
                        <div class="annotation-item">
                            <code>@Repository</code>
                            <p>Specialized @Component for data access</p>
                        </div>
                        <div class="annotation-item">
                            <code>@Query</code>
                            <p>Custom JPQL/SQL queries</p>
                        </div>
                        <div class="annotation-item">
                            <code>@Modifying</code>
                            <p>For INSERT/UPDATE/DELETE operations</p>
                        </div>
                    </div>
                    <div class="activity-log" id="repositoryLog">
                        <h4>Repository Activity:</h4>
                        <div class="log-content"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="comparison-section">
            <h2>Annotation Comparison</h2>
            <div class="comparison-table">
                <table>
                    <thead>
                        <tr>
                            <th>Annotation</th>
                            <th>Purpose</th>
                            <th>Layer</th>
                            <th>Special Features</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>@Component</code></td>
                            <td>Generic stereotype annotation</td>
                            <td>Any</td>
                            <td>Base annotation for all stereotypes</td>
                        </tr>
                        <tr>
                            <td><code>@Controller</code></td>
                            <td>Web layer component</td>
                            <td>Presentation</td>
                            <td>Indicates MVC controller</td>
                        </tr>
                        <tr>
                            <td><code>@RestController</code></td>
                            <td>RESTful web services</td>
                            <td>Presentation</td>
                            <td>@Controller + @ResponseBody</td>
                        </tr>
                        <tr>
                            <td><code>@Service</code></td>
                            <td>Business logic layer</td>
                            <td>Service</td>
                            <td>Indicates service layer component</td>
                        </tr>
                        <tr>
                            <td><code>@Repository</code></td>
                            <td>Data access layer</td>
                            <td>Persistence</td>
                            <td>Exception translation, persistence operations</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="data-display">
            <h2>Current Users</h2>
            <div id="usersList" class="users-list"></div>
        </div>
    </div>

    <script src="layered_architecture_script.js"></script>
</body>
</html>