<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Factory Design Pattern Evolution</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            animation: fadeInDown 1s ease-out;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .navigation {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .nav-btn {
            background: rgba(255,255,255,0.2);
            border: 2px solid rgba(255,255,255,0.3);
            color: white;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            font-weight: 600;
        }

        .nav-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .nav-btn.active {
            background: rgba(255,255,255,0.4);
            border-color: white;
        }

        .phase {
            display: none;
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            animation: fadeInUp 0.6s ease-out;
            backdrop-filter: blur(10px);
        }

        .phase.active {
            display: block;
        }

        .phase h2 {
            color: #4a5568;
            margin-bottom: 20px;
            font-size: 2em;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        .phase-description {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 25px;
            font-size: 1.1em;
            line-height: 1.6;
        }

        .code-section {
            margin-bottom: 25px;
        }

        .code-title {
            background: #2d3748;
            color: white;
            padding: 10px 20px;
            border-radius: 8px 8px 0 0;
            font-weight: 600;
            font-size: 1.1em;
        }

        pre {
            background: #1a202c;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 0 0 8px 8px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.5;
            border-left: 4px solid #667eea;
        }

        .keyword { color: #f56565; }
        .string { color: #68d391; }
        .comment { color: #a0aec0; font-style: italic; }
        .class-name { color: #fbb6ce; }
        .method { color: #63b3ed; }

        .pros-cons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 25px;
        }

        .pros, .cons {
            padding: 20px;
            border-radius: 10px;
        }

        .pros {
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
            color: white;
        }

        .cons {
            background: linear-gradient(135deg, #f56565 0%, #e53e3e 100%);
            color: white;
        }

        .pros h4, .cons h4 {
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .pros ul, .cons ul {
            list-style: none;
            padding-left: 0;
        }

        .pros li, .cons li {
            margin-bottom: 8px;
            padding-left: 20px;
            position: relative;
        }

        .pros li::before {
            content: "‚úì";
            position: absolute;
            left: 0;
            font-weight: bold;
        }

        .cons li::before {
            content: "‚úó";
            position: absolute;
            left: 0;
            font-weight: bold;
        }

        .progress-bar {
            background: rgba(255,255,255,0.3);
            height: 6px;
            border-radius: 3px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 3px;
            transition: width 0.5s ease;
        }

        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @media (max-width: 768px) {
            .pros-cons {
                grid-template-columns: 1fr;
            }
            
            .navigation {
                flex-direction: column;
                align-items: center;
            }
            
            .nav-btn {
                width: 200px;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üè≠ Factory Design Pattern Evolution</h1>
            <p>Journey from Simple Creation to Perfect Factory Implementation in Java</p>
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="progressFill" style="width: 16.66%"></div>
        </div>

        <div class="navigation">
            <button class="nav-btn active" onclick="showPhase(0)">Phase 1: Direct Creation</button>
            <button class="nav-btn" onclick="showPhase(1)">Phase 2: Simple Factory</button>
            <button class="nav-btn" onclick="showPhase(2)">Phase 3: Factory Method</button>
            <button class="nav-btn" onclick="showPhase(3)">Phase 4: Abstract Factory</button>
            <button class="nav-btn" onclick="showPhase(4)">Phase 5: Enhanced Factory</button>
            <button class="nav-btn" onclick="showPhase(5)">Perfect Version</button>
        </div>

        <!-- Phase 1: Direct Creation -->
        <div class="phase active" id="phase0">
            <h2>Phase 1: Direct Object Creation (The Problem)</h2>
            <div class="phase-description">
                This is the starting point - creating objects directly using the 'new' keyword. While simple, this approach leads to tight coupling and makes the code difficult to maintain and extend.
            </div>

            <div class="code-section">
                <div class="code-title">Product Classes</div>
                <pre><span class="comment">// Product interface</span>
<span class="keyword">interface</span> <span class="class-name">Vehicle</span> {
    <span class="keyword">void</span> <span class="method">start</span>();
    <span class="keyword">void</span> <span class="method">stop</span>();
}

<span class="comment">// Concrete implementations</span>
<span class="keyword">class</span> <span class="class-name">Car</span> <span class="keyword">implements</span> <span class="class-name">Vehicle</span> {
    <span class="keyword">public void</span> <span class="method">start</span>() {
        System.out.println(<span class="string">"Car engine started"</span>);
    }
    
    <span class="keyword">public void</span> <span class="method">stop</span>() {
        System.out.println(<span class="string">"Car engine stopped"</span>);
    }
}

<span class="keyword">class</span> <span class="class-name">Motorcycle</span> <span class="keyword">implements</span> <span class="class-name">Vehicle</span> {
    <span class="keyword">public void</span> <span class="method">start</span>() {
        System.out.println(<span class="string">"Motorcycle engine started"</span>);
    }
    
    <span class="keyword">public void</span> <span class="method">stop</span>() {
        System.out.println(<span class="string">"Motorcycle engine stopped"</span>);
    }
}</pre>
            </div>

            <div class="code-section">
                <div class="code-title">Client Code (Problematic)</div>
                <pre><span class="keyword">public class</span> <span class="class-name">VehicleManager</span> {
    <span class="keyword">public void</span> <span class="method">createAndUseVehicle</span>(<span class="class-name">String</span> type) {
        <span class="class-name">Vehicle</span> vehicle = <span class="keyword">null</span>;
        
        <span class="keyword">if</span> (type.equals(<span class="string">"car"</span>)) {
            vehicle = <span class="keyword">new</span> <span class="class-name">Car</span>(); <span class="comment">// Direct creation</span>
        } <span class="keyword">else if</span> (type.equals(<span class="string">"motorcycle"</span>)) {
            vehicle = <span class="keyword">new</span> <span class="class-name">Motorcycle</span>(); <span class="comment">// Direct creation</span>
        }
        
        <span class="keyword">if</span> (vehicle != <span class="keyword">null</span>) {
            vehicle.start();
            vehicle.stop();
        }
    }
}</pre>
            </div>

            <div class="pros-cons">
                <div class="cons">
                    <h4>‚ùå Problems</h4>
                    <ul>
                        <li>Tight coupling between client and concrete classes</li>
                        <li>Violates Open/Closed Principle</li>
                        <li>Hard to add new vehicle types</li>
                        <li>Code duplication in object creation logic</li>
                        <li>Difficult to test and maintain</li>
                    </ul>
                </div>
                <div class="pros">
                    <h4>‚úÖ Advantages</h4>
                    <ul>
                        <li>Simple and straightforward</li>
                        <li>No additional complexity</li>
                        <li>Direct control over object creation</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Phase 2: Simple Factory -->
        <div class="phase" id="phase1">
            <h2>Phase 2: Simple Factory Method</h2>
            <div class="phase-description">
                The Simple Factory encapsulates object creation logic in a separate class. This removes the creation responsibility from the client but still has limitations with extensibility.
            </div>

            <div class="code-section">
                <div class="code-title">Simple Factory Implementation</div>
                <pre><span class="keyword">class</span> <span class="class-name">SimpleVehicleFactory</span> {
    <span class="keyword">public static</span> <span class="class-name">Vehicle</span> <span class="method">createVehicle</span>(<span class="class-name">String</span> type) {
        <span class="keyword">if</span> (type == <span class="keyword">null</span> || type.isEmpty()) {
            <span class="keyword">return null</span>;
        }
        
        <span class="keyword">switch</span> (type.toLowerCase()) {
            <span class="keyword">case</span> <span class="string">"car"</span>:
                <span class="keyword">return new</span> <span class="class-name">Car</span>();
            <span class="keyword">case</span> <span class="string">"motorcycle"</span>:
                <span class="keyword">return new</span> <span class="class-name">Motorcycle</span>();
            <span class="keyword">case</span> <span class="string">"truck"</span>:
                <span class="keyword">return new</span> <span class="class-name">Truck</span>();
            <span class="keyword">default</span>:
                <span class="keyword">throw new</span> <span class="class-name">IllegalArgumentException</span>(<span class="string">"Unknown vehicle type: "</span> + type);
        }
    }
}

<span class="comment">// Additional vehicle type</span>
<span class="keyword">class</span> <span class="class-name">Truck</span> <span class="keyword">implements</span> <span class="class-name">Vehicle</span> {
    <span class="keyword">public void</span> <span class="method">start</span>() {
        System.out.println(<span class="string">"Truck engine started"</span>);
    }
    
    <span class="keyword">public void</span> <span class="method">stop</span>() {
        System.out.println(<span class="string">"Truck engine stopped"</span>);
    }
}</pre>
            </div>

            <div class="code-section">
                <div class="code-title">Updated Client Code</div>
                <pre><span class="keyword">public class</span> <span class="class-name">VehicleManager</span> {
    <span class="keyword">public void</span> <span class="method">createAndUseVehicle</span>(<span class="class-name">String</span> type) {
        <span class="class-name">Vehicle</span> vehicle = <span class="class-name">SimpleVehicleFactory</span>.<span class="method">createVehicle</span>(type);
        
        <span class="keyword">if</span> (vehicle != <span class="keyword">null</span>) {
            vehicle.start();
            <span class="comment">// Do some work with vehicle</span>
            vehicle.stop();
        }
    }
    
    <span class="keyword">public static void</span> <span class="method">main</span>(<span class="class-name">String</span>[] args) {
        <span class="class-name">VehicleManager</span> manager = <span class="keyword">new</span> <span class="class-name">VehicleManager</span>();
        
        manager.<span class="method">createAndUseVehicle</span>(<span class="string">"car"</span>);
        manager.<span class="method">createAndUseVehicle</span>(<span class="string">"motorcycle"</span>);
        manager.<span class="method">createAndUseVehicle</span>(<span class="string">"truck"</span>);
    }
}</pre>
            </div>

            <div class="pros-cons">
                <div class="pros">
                    <h4>‚úÖ Improvements</h4>
                    <ul>
                        <li>Centralized object creation logic</li>
                        <li>Client code is cleaner</li>
                        <li>Reduced coupling compared to direct creation</li>
                        <li>Single place to modify creation logic</li>
                    </ul>
                </div>
                <div class="cons">
                    <h4>‚ùå Limitations</h4>
                    <ul>
                        <li>Still violates Open/Closed Principle</li>
                        <li>Factory needs modification for new types</li>
                        <li>Not following true Factory Method pattern</li>
                        <li>Limited extensibility</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Phase 3: Factory Method -->
        <div class="phase" id="phase2">
            <h2>Phase 3: Factory Method Pattern</h2>
            <div class="phase-description">
                The Factory Method pattern defines an interface for creating objects, but lets subclasses decide which class to instantiate. This follows the Open/Closed Principle better.
            </div>

            <div class="code-section">
                <div class="code-title">Abstract Factory and Concrete Factories</div>
                <pre><span class="comment">// Abstract creator</span>
<span class="keyword">abstract class</span> <span class="class-name">VehicleFactory</span> {
    <span class="comment">// Factory method</span>
    <span class="keyword">public abstract</span> <span class="class-name">Vehicle</span> <span class="method">createVehicle</span>();
    
    <span class="comment">// Template method that uses the factory method</span>
    <span class="keyword">public void</span> <span class="method">deliverVehicle</span>() {
        <span class="class-name">Vehicle</span> vehicle = <span class="method">createVehicle</span>();
        vehicle.start();
        System.out.println(<span class="string">"Vehicle delivered successfully!"</span>);
        vehicle.stop();
    }
}

<span class="comment">// Concrete factories</span>
<span class="keyword">class</span> <span class="class-name">CarFactory</span> <span class="keyword">extends</span> <span class="class-name">VehicleFactory</span> {
    <span class="keyword">@Override</span>
    <span class="keyword">public</span> <span class="class-name">Vehicle</span> <span class="method">createVehicle</span>() {
        <span class="keyword">return new</span> <span class="class-name">Car</span>();
    }
}

<span class="keyword">class</span> <span class="class-name">MotorcycleFactory</span> <span class="keyword">extends</span> <span class="class-name">VehicleFactory</span> {
    <span class="keyword">@Override</span>
    <span class="keyword">public</span> <span class="class-name">Vehicle</span> <span class="method">createVehicle</span>() {
        <span class="keyword">return new</span> <span class="class-name">Motorcycle</span>();
    }
}

<span class="keyword">class</span> <span class="class-name">TruckFactory</span> <span class="keyword">extends</span> <span class="class-name">VehicleFactory</span> {
    <span class="keyword">@Override</span>
    <span class="keyword">public</span> <span class="class-name">Vehicle</span> <span class="method">createVehicle</span>() {
        <span class="keyword">return new</span> <span class="class-name">Truck</span>();
    }
}</pre>
            </div>

            <div class="code-section">
                <div class="code-title">Client Code with Factory Method</div>
                <pre><span class="keyword">public class</span> <span class="class-name">VehicleDeliveryService</span> {
    <span class="keyword">public void</span> <span class="method">processOrder</span>(<span class="class-name">VehicleFactory</span> factory) {
        factory.<span class="method">deliverVehicle</span>();
    }
    
    <span class="keyword">public static void</span> <span class="method">main</span>(<span class="class-name">String</span>[] args) {
        <span class="class-name">VehicleDeliveryService</span> service = <span class="keyword">new</span> <span class="class-name">VehicleDeliveryService</span>();
        
        <span class="comment">// Process different vehicle orders</span>
        service.<span class="method">processOrder</span>(<span class="keyword">new</span> <span class="class-name">CarFactory</span>());
        service.<span class="method">processOrder</span>(<span class="keyword">new</span> <span class="class-name">MotorcycleFactory</span>());
        service.<span class="method">processOrder</span>(<span class="keyword">new</span> <span class="class-name">TruckFactory</span>());
    }
}</pre>
            </div>

            <div class="pros-cons">
                <div class="pros">
                    <h4>‚úÖ Advantages</h4>
                    <ul>
                        <li>Follows Open/Closed Principle</li>
                        <li>Easy to add new vehicle types</li>
                        <li>Eliminates tight coupling</li>
                        <li>Code is more flexible and extensible</li>
                        <li>Follows Single Responsibility Principle</li>
                    </ul>
                </div>
                <div class="cons">
                    <h4>‚ùå Limitations</h4>
                    <ul>
                        <li>Requires creating a new class for each product</li>
                        <li>Can lead to class explosion</li>
                        <li>More complex than simple factory</li>
                        <li>Overkill for simple scenarios</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Phase 4: Abstract Factory -->
        <div class="phase" id="phase3">
            <h2>Phase 4: Abstract Factory Pattern</h2>
            <div class="phase-description">
                Abstract Factory provides an interface for creating families of related objects. This is useful when you need to create multiple related products together.
            </div>

            <div class="code-section">
                <div class="code-title">Product Families</div>
                <pre><span class="comment">// Engine interface and implementations</span>
<span class="keyword">interface</span> <span class="class-name">Engine</span> {
    <span class="keyword">void</span> <span class="method">start</span>();
    <span class="keyword">String</span> <span class="method">getType</span>();
}

<span class="keyword">class</span> <span class="class-name">PetrolEngine</span> <span class="keyword">implements</span> <span class="class-name">Engine</span> {
    <span class="keyword">public void</span> <span class="method">start</span>() { System.out.println(<span class="string">"Petrol engine started"</span>); }
    <span class="keyword">public</span> <span class="class-name">String</span> <span class="method">getType</span>() { <span class="keyword">return</span> <span class="string">"Petrol"</span>; }
}

<span class="keyword">class</span> <span class="class-name">ElectricEngine</span> <span class="keyword">implements</span> <span class="class-name">Engine</span> {
    <span class="keyword">public void</span> <span class="method">start</span>() { System.out.println(<span class="string">"Electric motor started"</span>); }
    <span class="keyword">public</span> <span class="class-name">String</span> <span class="method">getType</span>() { <span class="keyword">return</span> <span class="string">"Electric"</span>; }
}

<span class="comment">// Wheel interface and implementations</span>
<span class="keyword">interface</span> <span class="class-name">Wheel</span> {
    <span class="keyword">String</span> <span class="method">getDescription</span>();
}

<span class="keyword">class</span> <span class="class-name">StandardWheel</span> <span class="keyword">implements</span> <span class="class-name">Wheel</span> {
    <span class="keyword">public</span> <span class="class-name">String</span> <span class="method">getDescription</span>() { <span class="keyword">return</span> <span class="string">"Standard wheels"</span>; }
}

<span class="keyword">class</span> <span class="class-name">SportWheel</span> <span class="keyword">implements</span> <span class="class-name">Wheel</span> {
    <span class="keyword">public</span> <span class="class-name">String</span> <span class="method">getDescription</span>() { <span class="keyword">return</span> <span class="string">"Sport wheels"</span>; }
}</pre>
            </div>

            <div class="code-section">
                <div class="code-title">Abstract Factory and Concrete Factories</div>
                <pre><span class="comment">// Abstract factory</span>
<span class="keyword">interface</span> <span class="class-name">VehicleComponentFactory</span> {
    <span class="class-name">Vehicle</span> <span class="method">createVehicle</span>();
    <span class="class-name">Engine</span> <span class="method">createEngine</span>();
    <span class="class-name">Wheel</span> <span class="method">createWheel</span>();
}

<span class="comment">// Concrete factory for luxury vehicles</span>
<span class="keyword">class</span> <span class="class-name">LuxuryVehicleFactory</span> <span class="keyword">implements</span> <span class="class-name">VehicleComponentFactory</span> {
    <span class="keyword">public</span> <span class="class-name">Vehicle</span> <span class="method">createVehicle</span>() {
        <span class="keyword">return new</span> <span class="class-name">LuxuryCar</span>();
    }
    
    <span class="keyword">public</span> <span class="class-name">Engine</span> <span class="method">createEngine</span>() {
        <span class="keyword">return new</span> <span class="class-name">PetrolEngine</span>();
    }
    
    <span class="keyword">public</span> <span class="class-name">Wheel</span> <span class="method">createWheel</span>() {
        <span class="keyword">return new</span> <span class="class-name">SportWheel</span>();
    }
}

<span class="comment">// Concrete factory for eco-friendly vehicles</span>
<span class="keyword">class</span> <span class="class-name">EcoVehicleFactory</span> <span class="keyword">implements</span> <span class="class-name">VehicleComponentFactory</span> {
    <span class="keyword">public</span> <span class="class-name">Vehicle</span> <span class="method">createVehicle</span>() {
        <span class="keyword">return new</span> <span class="class-name">EcoCar</span>();
    }
    
    <span class="keyword">public</span> <span class="class-name">Engine</span> <span class="method">createEngine</span>() {
        <span class="keyword">return new</span> <span class="class-name">ElectricEngine</span>();
    }
    
    <span class="keyword">public</span> <span class="class-name">Wheel</span> <span class="method">createWheel</span>() {
        <span class="keyword">return new</span> <span class="class-name">StandardWheel</span>();
    }
}</pre>
            </div>

            <div class="pros-cons">
                <div class="pros">
                    <h4>‚úÖ Advantages</h4>
                    <ul>
                        <li>Creates families of related objects</li>
                        <li>Ensures product compatibility</li>
                        <li>Isolates concrete classes</li>
                        <li>Easy to switch product families</li>
                        <li>Promotes consistency among products</li>
                    </ul>
                </div>
                <div class="cons">
                    <h4>‚ùå Limitations</h4>
                    <ul>
                        <li>Complex to implement and understand</li>
                        <li>Difficult to add new products</li>
                        <li>Many interfaces and classes</li>
                        <li>Can be overkill for simple scenarios</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Phase 5: Enhanced Factory -->
        <div class="phase" id="phase4">
            <h2>Phase 5: Enhanced Factory with Modern Features</h2>
            <div class="phase-description">
                This phase adds modern Java features like generics, enums, reflection, and better error handling to make the factory more robust and type-safe.
            </div>

            <div class="code-section">
                <div class="code-title">Enhanced Factory with Generics and Enums</div>
                <pre><span class="keyword">import</span> java.util.*;
<span class="keyword">import</span> java.util.function.Supplier;

<span class="comment">// Vehicle types enum</span>
<span class="keyword">enum</span> <span class="class-name">VehicleType</span> {
    CAR(<span class="class-name">Car</span>::<span class="keyword">new</span>),
    MOTORCYCLE(<span class="class-name">Motorcycle</span>::<span class="keyword">new</span>),
    TRUCK(<span class="class-name">Truck</span>::<span class="keyword">new</span>),
    BUS(<span class="class-name">Bus</span>::<span class="keyword">new</span>);
    
    <span class="keyword">private final</span> <span class="class-name">Supplier</span>&lt;<span class="class-name">Vehicle</span>&gt; constructor;
    
    <span class="class-name">VehicleType</span>(<span class="class-name">Supplier</span>&lt;<span class="class-name">Vehicle</span>&gt; constructor) {
        <span class="keyword">this</span>.constructor = constructor;
    }
    
    <span class="keyword">public</span> <span class="class-name">Vehicle</span> <span class="method">create</span>() {
        <span class="keyword">return</span> constructor.<span class="method">get</span>();
    }
}

<span class="comment">// Enhanced factory with caching and validation</span>
<span class="keyword">public class</span> <span class="class-name">EnhancedVehicleFactory</span> {
    <span class="keyword">private static final</span> <span class="class-name">Map</span>&lt;<span class="class-name">VehicleType</span>, <span class="class-name">Vehicle</span>&gt; cache = <span class="keyword">new</span> <span class="class-name">ConcurrentHashMap</span>&lt;&gt;();
    <span class="keyword">private static final</span> <span class="class-name">Set</span>&lt;<span class="class-name">VehicleType</span>&gt; singletonTypes = <span class="class-name">EnumSet</span>.<span class="method">of</span>(<span class="class-name">VehicleType</span>.BUS);
    
    <span class="keyword">public static</span> &lt;<span class="class-name">T</span> <span class="keyword">extends</span> <span class="class-name">Vehicle</span>&gt; <span class="class-name">T</span> <span class="method">createVehicle</span>(<span class="class-name">VehicleType</span> type) {
        <span class="class-name">Objects</span>.<span class="method">requireNonNull</span>(type, <span class="string">"Vehicle type cannot be null"</span>);
        
        <span class="comment">// Check if this type should be singleton</span>
        <span class="keyword">if</span> (singletonTypes.<span class="method">contains</span>(type)) {
            <span class="keyword">return</span> (<span class="class-name">T</span>) cache.<span class="method">computeIfAbsent</span>(type, <span class="class-name">VehicleType</span>::create);
        }
        
        <span class="keyword">return</span> (<span class="class-name">T</span>) type.<span class="method">create</span>();
    }
    
    <span class="keyword">public static</span> <span class="class-name">List</span>&lt;<span class="class-name">Vehicle</span>&gt; <span class="method">createMultipleVehicles</span>(<span class="class-name">VehicleType</span>... types) {
        <span class="keyword">return</span> <span class="class-name">Arrays</span>.<span class="method">stream</span>(types)
                .<span class="method">map</span>(<span class="class-name">EnhancedVehicleFactory</span>::&lt;<span class="class-name">Vehicle</span>&gt;<span class="method">createVehicle</span>)
                .<span class="method">collect</span>(<span class="class-name">Collectors</span>.<span class="method">toList</span>());
    }
    
    <span class="keyword">public static void</span> <span class="method">clearCache</span>() {
        cache.<span class="method">clear</span>();
    }
}</pre>
            </div>

            <div class="code-section">
                <div class="code-title">Additional Vehicle Implementation</div>
                <pre><span class="keyword">class</span> <span class="class-name">Bus</span> <span class="keyword">implements</span> <span class="class-name">Vehicle</span> {
    <span class="keyword">private static int</span> instanceCount = 0;
    <span class="keyword">private final int</span> id;
    
    <span class="keyword">public</span> <span class="class-name">Bus</span>() {
        <span class="keyword">this</span>.id = ++instanceCount;
    }
    
    <span class="keyword">public void</span> <span class="method">start</span>() {
        System.out.println(<span class="string">"Bus #"</span> + id + <span class="string">" started with air brakes released"</span>);
    }
    
    <span class="keyword">public void</span> <span class="method">stop</span>() {
        System.out.println(<span class="string">"Bus #"</span> + id + <span class="string">" stopped with air brakes applied"</span>);
    }
}</pre>
            </div>

            <div class="code-section">
                <div class="code-title">Client Code with Enhanced Features</div>
                <pre><span class="keyword">public class</span> <span class="class-name">ModernVehicleService</span> {
    <span class="keyword">public static void</span> <span class="method">main</span>(<span class="class-name">String</span>[] args) {
        <span class="comment">// Type-safe vehicle creation</span>
        <span class="class-name">Car</span> car = <span class="class-name">EnhancedVehicleFactory</span>.<span class="method">createVehicle</span>(<span class="class-name">VehicleType</span>.CAR);
        <span class="class-name">Motorcycle</span> bike = <span class="class-name">EnhancedVehicleFactory</span>.<span class="method">createVehicle</span>(<span class="class-name">VehicleType</span>.MOTORCYCLE);
        
        <span class="comment">// Singleton pattern for buses</span>
        <span class="class-name">Bus</span> bus1 = <span class="class-name">EnhancedVehicleFactory</span>.<span class="method">createVehicle</span>(<span class="class-name">VehicleType</span>.BUS);
        <span class="class-name">Bus</span> bus2 = <span class="class-name">EnhancedVehicleFactory</span>.<span class="method">createVehicle</span>(<span class="class-name">VehicleType</span>.BUS);
        
        System.out.println(<span class="string">"Bus instances are same: "</span> + (bus1 == bus2));
        
        <span class="comment">// Batch creation</span>
        <span class="class-name">List</span>&lt;<span class="class-name">Vehicle</span>&gt; fleet = <span class="class-name">EnhancedVehicleFactory</span>.<span class="method">createMultipleVehicles</span>(
            <span class="class-name">VehicleType</span>.CAR, <span class="class-name">VehicleType</span>.TRUCK, <span class="class-name">VehicleType</span>.MOTORCYCLE
        );
        
        fleet.<span class="method">forEach</span>(<span class="class-name">Vehicle</span>::start);
    }
}</pre>
            </div>

            <div class="pros-cons">
                <div class="pros">
                    <h4>‚úÖ Enhancements</h4>
                    <ul>
                        <li>Type safety with generics</li>
                        <li>Enum-based type system</li>
                        <li>Caching for performance</li>
                        <li>Batch creation support</li>
                        <li>Lambda expressions and method references</li>
                        <li>Better error handling</li>
                    </ul>
                </div>
                <div class="cons">
                    <h4>‚ùå Considerations</h4>
                    <ul>
                        <li>More complex implementation</li>
                        <li>Requires Java 8+ features</li>
                        <li>Cache management needed</li>
                        <li>Memory overhead for caching</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Phase 6: Perfect Version -->
        <div class="phase" id="phase5">
            <h2>üéØ Perfect Version: Complete Factory Implementation</h2>
            <div class="phase-description">
                This is the ultimate factory implementation combining all best practices: dependency injection, configuration-driven creation, plugin architecture, comprehensive error handling, logging, and full extensibility.
            </div>

            <div class="code-section">
                <div class="code-title">Configuration and Registry System</div>
                <pre><span class="keyword">import</span> java.util.*;
<span class="keyword">import</span> java.util.concurrent.ConcurrentHashMap;
<span class="keyword">import</span> java.util.function.Supplier;
<span class="keyword">import</span> java.util.logging.Logger;

<span class="comment">// Configuration class for vehicle creation</span>
<span class="keyword">public class</span> <span class="class-name">VehicleConfig</span> {
    <span class="keyword">private final</span> <span class="class-name">String</span> engineType;
    <span class="keyword">private final</span> <span class="class-name">String</span> fuelType;
    <span class="keyword">private final</span> <span class="class-name">Map</span>&lt;<span class="class-name">String</span>, <span class="class-name">Object</span>&gt; additionalProperties;
    
    <span class="keyword">public</span> <span class="class-name">VehicleConfig</span>(<span class="class-name">Builder</span> builder) {
        <span class="keyword">this</span>.engineType = builder.engineType;
        <span class="keyword">this</span>.fuelType = builder.fuelType;
        <span class="keyword">this</span>.additionalProperties = <span class="keyword">new</span> <span class="class-name">HashMap</span>&lt;&gt;(builder.additionalProperties);
    }
    
    <span class="comment">// Builder pattern for configuration</span>
    <span class="keyword">public static class</span> <span class="class-name">Builder</span> {
        <span class="keyword">private</span> <span class="class-name">String</span> engineType = <span class="string">"standard"</span>;
        <span class="keyword">private</span> <span class="class-name">String</span> fuelType = <span class="string">"petrol"</span>;
        <span class="keyword">private</span> <span class="class-name">Map</span>&lt;<span class="class-name">String</span>, <span class="class-name">Object</span>&gt; additionalProperties = <span class="keyword">new</span> <span class="class-name">HashMap</span>&lt;&gt;();
        
        <span class="keyword">public</span> <span class="class-name">Builder</span> <span class="method">engineType</span>(<span class="class-name">String</span> engineType) {
            <span class="keyword">this</span>.engineType = engineType;
            <span class="keyword">return this</span>;
        }
        
        <span class="keyword">public</span> <span class="class-name">Builder</span> <span class="method">fuelType</span>(<span class="class-name">String</span> fuelType) {
            <span class="keyword">this</span>.fuelType = fuelType;
            <span class="keyword">return this</span>;
        }
        
        <span class="keyword">public</span> <span class="class-name">Builder</span> <span class="method">property</span>(<span class="class-name">String</span> key, <span class="class-name">Object</span> value) {
            additionalProperties.<span class="method">put</span>(key, value);
            <span class="keyword">return this</span>;
        }
        
        <span class="keyword">public</span> <span class="class-name">VehicleConfig</span> <span class="method">build</span>() {
            <span class="keyword">return new</span> <span class="class-name">VehicleConfig</span>(<span class="keyword">this</span>);
        }
    }
    
    <span class="comment">// Getters</span>
    <span class="keyword">public</span> <span class="class-name">String</span> <span class="method">getEngineType</span>() { <span class="keyword">return</span> engineType; }
    <span class="keyword">public</span> <span class="class-name">String</span> <span class="method">getFuelType</span>() { <span class="keyword">return</span> fuelType; }
    <span class="keyword">public</span> <span class="class-name">Map</span>&lt;<span class="class-name">String</span>, <span class="class-name">Object</span>&gt; <span class="method">getAdditionalProperties</span>() { <span class="keyword">return</span> <span class="keyword">new</span> <span class="class-name">HashMap</span>&lt;&gt;(additionalProperties); }
}</pre>
            </div>

            <div class="code-section">
                <div class="code-title">Plugin Architecture and Registry</div>
                <pre><span class="comment">// Plugin interface for extensibility</span>
<span class="keyword">interface</span> <span class="class-name">VehiclePlugin</span> {
    <span class="class-name">String</span> <span class="method">getName</span>();
    <span class="class-name">Vehicle</span> <span class="method">createVehicle</span>(<span class="class-name">VehicleConfig</span> config);
    <span class="keyword">boolean</span> <span class="method">canHandle</span>(<span class="class-name">String</span> vehicleType);
}

<span class="comment">// Vehicle registry with plugin support</span>
<span class="keyword">public class</span> <span class="class-name">VehicleRegistry</span> {
    <span class="keyword">private static final</span> <span class="class-name">Logger</span> LOGGER = <span class="class-name">Logger</span>.<span class="method">getLogger</span>(<span class="class-name">VehicleRegistry</span>.<span class="keyword">class</span>.<span class="method">getName</span>());
    <span class="keyword">private final</span> <span class="class-name">Map</span>&lt;<span class="class-name">String</span>, <span class="class-name">Supplier</span>&lt;<span class="class-name">Vehicle</span>&gt;&gt; vehicleConstructors = <span class="keyword">new</span> <span class="class-name">ConcurrentHashMap</span>&lt;&gt;();
    <span class="keyword">private final</span> <span class="class-name">List</span>&lt;<span class="class-name">VehiclePlugin</span>&gt; plugins = <span class="keyword">new</span> <span class="class-name">ArrayList</span>&lt;&gt;();
    <span class="keyword">private final</span> <span class="class-name">Map</span>&lt;<span class="class-name">String</span>, <span class="class-name">Vehicle</span>&gt; singletonCache = <span class="keyword">new</span> <span class="class-name">ConcurrentHashMap</span>&lt;&gt;();
    <span class="keyword">private final</span> <span class="class-name">Set</span>&lt;<span class="class-name">String</span>&gt; singletonTypes = <span class="keyword">new</span> <span class="class-name">HashSet</span>&lt;&gt;();
    
    <span class="keyword">public</span> <span class="class-name">VehicleRegistry</span>() {
        <span class="method">registerDefaultVehicles</span>();
    }
    
    <span class="keyword">private void</span> <span class="method">registerDefaultVehicles</span>() {
        <span class="method">register</span>(<span class="string">"car"</span>, <span class="class-name">Car</span>::<span class="keyword">new</span>);
        <span class="method">register</span>(<span class="string">"motorcycle"</span>, <span class="class-name">Motorcycle</span>::<span class="keyword">new</span>);
        <span class="method">register</span>(<span class="string">"truck"</span>, <span class="class-name">Truck</span>::<span class="keyword">new</span>);
        <span class="method">register</span>(<span class="string">"bus"</span>, <span class="class-name">Bus</span>::<span class="keyword">new</span>, <span class="keyword">true</span>);
    }
    
    <span class="keyword">public void</span> <span class="method">register</span>(<span class="class-name">String</span> type, <span class="class-name">Supplier</span>&lt;<span class="class-name">Vehicle</span>&gt; constructor) {
        <span class="method">register</span>(type, constructor, <span class="keyword">false</span>);
    }
    
    <span class="keyword">public void</span> <span class="method">register</span>(<span class="class-name">String</span> type, <span class="class-name">Supplier</span>&lt;<span class="class-name">Vehicle</span>&gt; constructor, <span class="keyword">boolean</span> singleton) {
        vehicleConstructors.<span class="method">put</span>(type.toLowerCase(), constructor);
        <span class="keyword">if</span> (singleton) {
            singletonTypes.<span class="method">add</span>(type.toLowerCase());
        }
        LOGGER.<span class="method">info</span>(<span class="string">"Registered vehicle type: "</span> + type + <span class="string">" (singleton: "</span> + singleton + <span class="string">")"</span>);
    }
    
    <span class="keyword">public void</span> <span class="method">registerPlugin</span>(<span class="class-name">VehiclePlugin</span> plugin) {
        plugins.<span class="method">add</span>(plugin);
        LOGGER.<span class="method">info</span>(<span class="string">"Registered plugin: "</span> + plugin.<span class="method">getName</span>());
    }
    
    <span class="keyword">public</span> <span class="class-name">Vehicle</span> <span class="method">createVehicle</span>(<span class="class-name">String</span> type, <span class="class-name">VehicleConfig</span> config) {
        <span class="class-name">String</span> normalizedType = type.toLowerCase();
        
        <span class="comment">// Check plugins first</span>
        <span class="keyword">for</span> (<span class="class-name">VehiclePlugin</span> plugin : plugins) {
            <span class="keyword">if</span> (plugin.<span class="method">canHandle</span>(normalizedType)) {
                LOGGER.<span class="method">info</span>(<span class="string">"Creating vehicle using plugin: "</span> + plugin.<span class="method">getName</span>());
                <span class="keyword">return</span> plugin.<span class="method">createVehicle</span>(config);
            }
        }
        
        <span class="comment">// Check singleton cache</span>
        <span class="keyword">if</span> (singletonTypes.<span class="method">contains</span>(normalizedType)) {
            <span class="keyword">return</span> singletonCache.<span class="method">computeIfAbsent</span>(normalizedType, 
                k -&gt; <span class="method">createNewVehicle</span>(k, config));
        }
        
        <span class="keyword">return</span> <span class="method">createNewVehicle</span>(normalizedType, config);
    }
    
    <span class="keyword">private</span> <span class="class-name">Vehicle</span> <span class="method">createNewVehicle</span>(<span class="class-name">String</span> type, <span class="class-name">VehicleConfig</span> config) {
        <span class="class-name">Supplier</span>&lt;<span class="class-name">Vehicle</span>&gt; constructor = vehicleConstructors.<span class="method">get</span>(type);
        <span class="keyword">if</span> (constructor == <span class="keyword">null</span>) {
            <span class="keyword">throw new</span> <span class="class-name">IllegalArgumentException</span>(<span class="string">"Unknown vehicle type: "</span> + type);
        }
        
        <span class="class-name">Vehicle</span> vehicle = constructor.<span class="method">get</span>();
        LOGGER.<span class="method">info</span>(<span class="string">"Created vehicle: "</span> + vehicle.<span class="method">getClass</span>().<span class="method">getSimpleName</span>());
        <span class="keyword">return</span> vehicle;
    }
    
    <span class="keyword">public</span> <span class="class-name">Set</span>&lt;<span class="class-name">String</span>&gt; <span class="method">getRegisteredTypes</span>() {
        <span class="keyword">return new</span> <span class="class-name">HashSet</span>&lt;&gt;(vehicleConstructors.<span class="method">keySet</span>());
    }
}</pre>
            </div>

            <div class="code-section">
                <div class="code-title">Ultimate Factory Implementation</div>
                <pre><span class="comment">// Perfect factory implementation</span>
<span class="keyword">public class</span> <span class="class-name">UltimateVehicleFactory</span> {
    <span class="keyword">private static final</span> <span class="class-name">Logger</span> LOGGER = <span class="class-name">Logger</span>.<span class="method">getLogger</span>(<span class="class-name">UltimateVehicleFactory</span>.<span class="keyword">class</span>.<span class="method">getName</span>());
    <span class="keyword">private static</span> <span class="class-name">UltimateVehicleFactory</span> instance;
    <span class="keyword">private final</span> <span class="class-name">VehicleRegistry</span> registry;
    
    <span class="keyword">private</span> <span class="class-name">UltimateVehicleFactory</span>() {
        <span class="keyword">this</span>.registry = <span class="keyword">new</span> <span class="class-name">VehicleRegistry</span>();
        <span class="method">initializePlugins</span>();
    }
    
    <span class="keyword">public static synchronized</span> <span class="class-name">UltimateVehicleFactory</span> <span class="method">getInstance</span>() {
        <span class="keyword">if</span> (instance == <span class="keyword">null</span>) {
            instance = <span class="keyword">new</span> <span class="class-name">UltimateVehicleFactory</span>();
        }
        <span class="keyword">return</span> instance;
    }
    
    <span class="keyword">private void</span> <span class="method">initializePlugins</span>() {
        <span class="comment">// Register custom plugins</span>
        registry.<span class="method">registerPlugin</span>(<span class="keyword">new</span> <span class="class-name">HybridVehiclePlugin</span>());
        registry.<span class="method">registerPlugin</span>(<span class="keyword">new</span> <span class="class-name">ElectricVehiclePlugin</span>());
    }
    
    <span class="comment">// Main factory method with full configuration</span>
    <span class="keyword">public</span> &lt;<span class="class-name">T</span> <span class="keyword">extends</span> <span class="class-name">Vehicle</span>&gt; <span class="class-name">T</span> <span class="method">createVehicle</span>(<span class="class-name">String</span> type, <span class="class-name">VehicleConfig</span> config) {
        <span class="keyword">try</span> {
            <span class="class-name">Objects</span>.<span class="method">requireNonNull</span>(type, <span class="string">"Vehicle type cannot be null"</span>);
            <span class="class-name">Objects</span>.<span class="method">requireNonNull</span>(config, <span class="string">"Vehicle config cannot be null"</span>);
            
            LOGGER.<span class="method">info</span>(<span class="string">"Creating vehicle of type: "</span> + type);
            <span class="class-name">Vehicle</span> vehicle = registry.<span class="method">createVehicle</span>(type, config);
            
            <span class="comment">// Post-creation hook</span>
            <span class="method">postProcessVehicle</span>(vehicle, config);
            
            <span class="keyword">return</span> (<span class="class-name">T</span>) vehicle;
        } <span class="keyword">catch</span> (<span class="class-name">Exception</span> e) {
            LOGGER.<span class="method">severe</span>(<span class="string">"Failed to create vehicle: "</span> + e.<span class="method">getMessage</span>());
            <span class="keyword">throw new</span> <span class="class-name">VehicleCreationException</span>(<span class="string">"Failed to create vehicle of type: "</span> + type, e);
        }
    }
    
    <span class="comment">// Convenience method with default config</span>
    <span class="keyword">public</span> &lt;<span class="class-name">T</span> <span class="keyword">extends</span> <span class="class-name">Vehicle</span>&gt; <span class="class-name">T</span> <span class="method">createVehicle</span>(<span class="class-name">String</span> type) {
        <span class="keyword">return</span> <span class="method">createVehicle</span>(type, <span class="keyword">new</span> <span class="class-name">VehicleConfig</span>.<span class="class-name">Builder</span>().<span class="method">build</span>());
    }
    
    <span class="comment">// Batch creation with different configs</span>
    <span class="keyword">public</span> <span class="class-name">List</span>&lt;<span class="class-name">Vehicle</span>&gt; <span class="method">createVehicleFleet</span>(<span class="class-name">Map</span>&lt;<span class="class-name">String</span>, <span class="class-name">VehicleConfig</span>&gt; specifications) {
        <span class="keyword">return</span> specifications.<span class="method">entrySet</span>().<span class="method">stream</span>()
                .<span class="method">map</span>(entry -&gt; <span class="method">createVehicle</span>(entry.<span class="method">getKey</span>(), entry.<span class="method">getValue</span>()))
                .<span class="method">collect</span>(<span class="class-name">Collectors</span>.<span class="method">toList</span>());
    }
    
    <span class="keyword">private void</span> <span class="method">postProcessVehicle</span>(<span class="class-name">Vehicle</span> vehicle, <span class="class-name">VehicleConfig</span> config) {
        <span class="comment">// Apply configuration-based modifications</span>
        <span class="comment">// This could include dependency injection, aspect weaving, etc.</span>
        LOGGER.<span class="method">fine</span>(<span class="string">"Post-processing vehicle with config: "</span> + config.<span class="method">getEngineType</span>());
    }
    
    <span class="comment">// Management methods</span>
    <span class="keyword">public void</span> <span class="method">registerVehicleType</span>(<span class="class-name">String</span> type, <span class="class-name">Supplier</span>&lt;<span class="class-name">Vehicle</span>&gt; constructor) {
        registry.<span class="method">register</span>(type, constructor);
    }
    
    <span class="keyword">public void</span> <span class="method">registerPlugin</span>(<span class="class-name">VehiclePlugin</span> plugin) {
        registry.<span class="method">registerPlugin</span>(plugin);
    }
    
    <span class="keyword">public</span> <span class="class-name">Set</span>&lt;<span class="class-name">String</span>&gt; <span class="method">getAvailableTypes</span>() {
        <span class="keyword">return</span> registry.<span class="method">getRegisteredTypes</span>();
    }
}

<span class="comment">// Custom exception for better error handling</span>
<span class="keyword">class</span> <span class="class-name">VehicleCreationException</span> <span class="keyword">extends</span> <span class="class-name">RuntimeException</span> {
    <span class="keyword">public</span> <span class="class-name">VehicleCreationException</span>(<span class="class-name">String</span> message, <span class="class-name">Throwable</span> cause) {
        <span class="keyword">super</span>(message, cause);
    }
}</pre>
            </div>

            <div class="code-section">
                <div class="code-title">Sample Plugin Implementations</div>
                <pre><span class="comment">// Example plugins for extensibility</span>
<span class="keyword">class</span> <span class="class-name">HybridVehiclePlugin</span> <span class="keyword">implements</span> <span class="class-name">VehiclePlugin</span> {
    <span class="keyword">public</span> <span class="class-name">String</span> <span class="method">getName</span>() {
        <span class="keyword">return</span> <span class="string">"HybridVehiclePlugin"</span>;
    }
    
    <span class="keyword">public boolean</span> <span class="method">canHandle</span>(<span class="class-name">String</span> vehicleType) {
        <span class="keyword">return</span> vehicleType.<span class="method">contains</span>(<span class="string">"hybrid"</span>);
    }
    
    <span class="keyword">public</span> <span class="class-name">Vehicle</span> <span class="method">createVehicle</span>(<span class="class-name">VehicleConfig</span> config) {
        <span class="keyword">return new</span> <span class="class-name">HybridCar</span>(config);
    }
}

<span class="keyword">class</span> <span class="class-name">ElectricVehiclePlugin</span> <span class="keyword">implements</span> <span class="class-name">VehiclePlugin</span> {
    <span class="keyword">public</span> <span class="class-name">String</span> <span class="method">getName</span>() {
        <span class="keyword">return</span> <span class="string">"ElectricVehiclePlugin"</span>;
    }
    
    <span class="keyword">public boolean</span> <span class="method">canHandle</span>(<span class="class-name">String</span> vehicleType) {
        <span class="keyword">return</span> vehicleType.<span class="method">startsWith</span>(<span class="string">"electric"</span>) || vehicleType.<span class="method">endsWith</span>(<span class="string">"ev"</span>);
    }
    
    <span class="keyword">public</span> <span class="class-name">Vehicle</span> <span class="method">createVehicle</span>(<span class="class-name">VehicleConfig</span> config) {
        <span class="keyword">return new</span> <span class="class-name">ElectricCar</span>(config);
    }
}

<span class="comment">// Example advanced vehicle implementations</span>
<span class="keyword">class</span> <span class="class-name">HybridCar</span> <span class="keyword">implements</span> <span class="class-name">Vehicle</span> {
    <span class="keyword">private final</span> <span class="class-name">VehicleConfig</span> config;
    
    <span class="keyword">public</span> <span class="class-name">HybridCar</span>(<span class="class-name">VehicleConfig</span> config) {
        <span class="keyword">this</span>.config = config;
    }
    
    <span class="keyword">public void</span> <span class="method">start</span>() {
        System.out.println(<span class="string">"Hybrid car started with "</span> + config.<span class="method">getEngineType</span>() + 
                          <span class="string">" engine and "</span> + config.<span class="method">getFuelType</span>() + <span class="string">" fuel"</span>);
    }
    
    <span class="keyword">public void</span> <span class="method">stop</span>() {
        System.out.println(<span class="string">"Hybrid car stopped - switching to electric mode"</span>);
    }
}

<span class="keyword">class</span> <span class="class-name">ElectricCar</span> <span class="keyword">implements</span> <span class="class-name">Vehicle</span> {
    <span class="keyword">private final</span> <span class="class-name">VehicleConfig</span> config;
    
    <span class="keyword">public</span> <span class="class-name">ElectricCar</span>(<span class="class-name">VehicleConfig</span> config) {
        <span class="keyword">this</span>.config = config;
    }
    
    <span class="keyword">public void</span> <span class="method">start</span>() {
        System.out.println(<span class="string">"Electric car started silently - battery at "</span> + 
                          config.<span class="method">getAdditionalProperties</span>().<span class="method">getOrDefault</span>(<span class="string">"batteryLevel"</span>, <span class="string">"100%"</span>));
    }
    
    <span class="keyword">public void</span> <span class="method">stop</span>() {
        System.out.println(<span class="string">"Electric car stopped - regenerative braking active"</span>);
    }
}</pre>
            </div>

            <div class="code-section">
                <div class="code-title">Comprehensive Demo Application</div>
                <pre><span class="keyword">import</span> java.util.*;

<span class="keyword">public class</span> <span class="class-name">PerfectFactoryDemo</span> {
    <span class="keyword">public static void</span> <span class="method">main</span>(<span class="class-name">String</span>[] args) {
        <span class="class-name">UltimateVehicleFactory</span> factory = <span class="class-name">UltimateVehicleFactory</span>.<span class="method">getInstance</span>();
        
        System.out.println(<span class="string">"=== Ultimate Factory Pattern Demo ==="</span>);
        System.out.println(<span class="string">"Available vehicle types: "</span> + factory.<span class="method">getAvailableTypes</span>());
        System.out.println();
        
        <span class="comment">// 1. Basic vehicle creation</span>
        System.out.println(<span class="string">"1. Basic Vehicle Creation:"</span>);
        <span class="class-name">Vehicle</span> car = factory.<span class="method">createVehicle</span>(<span class="string">"car"</span>);
        car.<span class="method">start</span>();
        car.<span class="method">stop</span>();
        System.out.println();
        
        <span class="comment">// 2. Advanced configuration</span>
        System.out.println(<span class="string">"2. Advanced Configuration:"</span>);
        <span class="class-name">VehicleConfig</span> luxuryConfig = <span class="keyword">new</span> <span class="class-name">VehicleConfig</span>.<span class="class-name">Builder</span>()
                .<span class="method">engineType</span>(<span class="string">"V8"</span>)
                .<span class="method">fuelType</span>(<span class="string">"premium"</span>)
                .<span class="method">property</span>(<span class="string">"color"</span>, <span class="string">"black"</span>)
                .<span class="method">property</span>(<span class="string">"leather"</span>, <span class="keyword">true</span>)
                .<span class="method">build</span>();
        
        <span class="class-name">Vehicle</span> luxuryCar = factory.<span class="method">createVehicle</span>(<span class="string">"car"</span>, luxuryConfig);
        luxuryCar.<span class="method">start</span>();
        luxuryCar.<span class="method">stop</span>();
        System.out.println();
        
        <span class="comment">// 3. Plugin-based creation</span>
        System.out.println(<span class="string">"3. Plugin-based Vehicle Creation:"</span>);
        <span class="class-name">VehicleConfig</span> hybridConfig = <span class="keyword">new</span> <span class="class-name">VehicleConfig</span>.<span class="class-name">Builder</span>()
                .<span class="method">engineType</span>(<span class="string">"hybrid"</span>)
                .<span class="method">fuelType</span>(<span class="string">"petrol-electric"</span>)
                .<span class="method">build</span>();
        
        <span class="class-name">Vehicle</span> hybridCar = factory.<span class="method">createVehicle</span>(<span class="string">"hybrid-car"</span>, hybridConfig);
        hybridCar.<span class="method">start</span>();
        hybridCar.<span class="method">stop</span>();
        
        <span class="class-name">VehicleConfig</span> electricConfig = <span class="keyword">new</span> <span class="class-name">VehicleConfig</span>.<span class="class-name">Builder</span>()
                .<span class="method">engineType</span>(<span class="string">"electric"</span>)
                .<span class="method">fuelType</span>(<span class="string">"battery"</span>)
                .<span class="method">property</span>(<span class="string">"batteryLevel"</span>, <span class="string">"85%"</span>)
                .<span class="method">build</span>();
        
        <span class="class-name">Vehicle</span> electricCar = factory.<span class="method">createVehicle</span>(<span class="string">"electric-ev"</span>, electricConfig);
        electricCar.<span class="method">start</span>();
        electricCar.<span class="method">stop</span>();
        System.out.println();
        
        <span class="comment">// 4. Singleton demonstration</span>
        System.out.println(<span class="string">"4. Singleton Pattern Demonstration:"</span>);
        <span class="class-name">Vehicle</span> bus1 = factory.<span class="method">createVehicle</span>(<span class="string">"bus"</span>);
        <span class="class-name">Vehicle</span> bus2 = factory.<span class="method">createVehicle</span>(<span class="string">"bus"</span>);
        System.out.println(<span class="string">"Bus instances are same: "</span> + (bus1 == bus2));
        bus1.<span class="method">start</span>();
        System.out.println();
        
        <span class="comment">// 5. Fleet creation</span>
        System.out.println(<span class="string">"5. Fleet Creation:"</span>);
        <span class="class-name">Map</span>&lt;<span class="class-name">String</span>, <span class="class-name">VehicleConfig</span>&gt; fleetSpecs = <span class="keyword">new</span> <span class="class-name">HashMap</span>&lt;&gt;();
        fleetSpecs.<span class="method">put</span>(<span class="string">"car"</span>, <span class="keyword">new</span> <span class="class-name">VehicleConfig</span>.<span class="class-name">Builder</span>().<span class="method">fuelType</span>(<span class="string">"diesel"</span>).<span class="method">build</span>());
        fleetSpecs.<span class="method">put</span>(<span class="string">"truck"</span>, <span class="keyword">new</span> <span class="class-name">VehicleConfig</span>.<span class="class-name">Builder</span>().<span class="method">engineType</span>(<span class="string">"heavy-duty"</span>).<span class="method">build</span>());
        fleetSpecs.<span class="method">put</span>(<span class="string">"motorcycle"</span>, <span class="keyword">new</span> <span class="class-name">VehicleConfig</span>.<span class="class-name">Builder</span>().<span class="method">build</span>());
        
        <span class="class-name">List</span>&lt;<span class="class-name">Vehicle</span>&gt; fleet = factory.<span class="method">createVehicleFleet</span>(fleetSpecs);
        System.out.println(<span class="string">"Created fleet of "</span> + fleet.<span class="method">size</span>() + <span class="string">" vehicles:"</span>);
        fleet.<span class="method">forEach</span>(vehicle -&gt; {
            vehicle.<span class="method">start</span>();
            vehicle.<span class="method">stop</span>();
            System.out.println(<span class="string">"---"</span>);
        });
        
        <span class="comment">// 6. Runtime registration</span>
        System.out.println(<span class="string">"6. Runtime Vehicle Type Registration:"</span>);
        factory.<span class="method">registerVehicleType</span>(<span class="string">"boat"</span>, () -&gt; <span class="keyword">new</span> <span class="class-name">Vehicle</span>() {
            <span class="keyword">public void</span> <span class="method">start</span>() { System.out.println(<span class="string">"Boat engine started - propeller spinning"</span>); }
            <span class="keyword">public void</span> <span class="method">stop</span>() { System.out.println(<span class="string">"Boat engine stopped - anchored"</span>); }
        });
        
        <span class="class-name">Vehicle</span> boat = factory.<span class="method">createVehicle</span>(<span class="string">"boat"</span>);
        boat.<span class="method">start</span>();
        boat.<span class="method">stop</span>();
        
        System.out.println(<span class="string">"\nUpdated available types: "</span> + factory.<span class="method">getAvailableTypes</span>());
        
        <span class="comment">// 7. Error handling demonstration</span>
        System.out.println(<span class="string">"\n7. Error Handling:"</span>);
        <span class="keyword">try</span> {
            factory.<span class="method">createVehicle</span>(<span class="string">"spaceship"</span>);
        } <span class="keyword">catch</span> (<span class="class-name">VehicleCreationException</span> e) {
            System.out.println(<span class="string">"Caught expected exception: "</span> + e.<span class="method">getMessage</span>());
        }
    }
}</pre>
            </div>

            <div class="pros-cons">
                <div class="pros">
                    <h4>üèÜ Perfect Implementation Features</h4>
                    <ul>
                        <li>Complete SOLID principles compliance</li>
                        <li>Plugin architecture for unlimited extensibility</li>
                        <li>Configuration-driven object creation</li>
                        <li>Built-in caching and singleton support</li>
                        <li>Comprehensive error handling and logging</li>
                        <li>Type safety with generics</li>
                        <li>Builder pattern for complex configurations</li>
                        <li>Batch operations and fleet management</li>
                        <li>Runtime registration capabilities</li>
                        <li>Thread-safe implementation</li>
                        <li>Dependency injection ready</li>
                        <li>Aspect-oriented programming support</li>
                    </ul>
                </div>
                <div class="cons">
                    <h4>‚öñÔ∏è Trade-offs</h4>
                    <ul>
                        <li>Higher complexity for simple use cases</li>
                        <li>More memory overhead</li>
                        <li>Steeper learning curve</li>
                        <li>Requires more initial setup</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentPhase = 0;
        const totalPhases = 6;

        function showPhase(phaseIndex) {
            // Hide all phases
            for (let i = 0; i < totalPhases; i++) {
                document.getElementById(`phase${i}`).classList.remove('active');
                document.querySelectorAll('.nav-btn')[i].classList.remove('active');
            }
            
            // Show selected phase
            document.getElementById(`phase${phaseIndex}`).classList.add('active');
            document.querySelectorAll('.nav-btn')[phaseIndex].classList.add('active');
            
            // Update progress bar
            const progressPercent = ((phaseIndex + 1) / totalPhases) * 100;
            document.getElementById('progressFill').style.width = `${progressPercent}%`;
            
            currentPhase = phaseIndex;
        }

        // Keyboard navigation
        document.addEventListener('keydown', function(e) {
            if (e.key === 'ArrowLeft' && currentPhase > 0) {
                showPhase(currentPhase - 1);
            } else if (e.key === 'ArrowRight' && currentPhase < totalPhases - 1) {
                showPhase(currentPhase + 1);
            }
        });

        // Auto-highlight code syntax
        document.addEventListener('DOMContentLoaded', function() {
            // Add some interactive effects
            const navButtons = document.querySelectorAll('.nav-btn');
            navButtons.forEach(btn => {
                btn.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-3px) scale(1.05)';
                });
                btn.addEventListener('mouseleave', function() {
                    if (!this.classList.contains('active')) {
                        this.style.transform = 'translateY(0) scale(1)';
                    }
                });
            });
        });
    </script>
</body>
</html>
        